#!/usr/bin/env bash
############################################
choose_which_gnu_linux_distro() {
	source ${TMOE_SHARE_DIR}/container/qemu/qemu-user
	RETURN_TO_WHERE='choose_which_gnu_linux_distro'
	RETURN_TO_MENU='choose_which_gnu_linux_distro'
	CLOUD_ROOTFS='false'
	DEB_BOOT_STRAP='false'
	TMOE_LINUX_CONTAINER_DISTRO=''
	check_rootfs_dir
	[[ ! -e ${CONFIG_FOLDER}/debootstrap_dir.txt ]] || rm -fv ${CONFIG_FOLDER}/debootstrap_dir.txt
	rm -f ~/.ALPINELINUXDetectionFILE 2>/dev/null
	unset NODE02_ENABLED WEEKLY_BUILD_CONTAINER
	choose_which_gnu_linux_distro_ja() {
		SELECTED_GNU_LINUX=$(whiptail --title "GNU/Linux distros" --menu "GNU/Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„" 0 50 0 \
			"1" "ğŸ­ betaç‰ˆ:Weekly build(Includes GUI)" \
			"2" "ğŸ¥ Debian ã¯ ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ•ãƒªãƒ¼ãªãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™" \
			"3" "ğŸ› Ubuntu:é–‹ç™ºç›®æ¨™ã¯ã€Œèª°ã«ã§ã‚‚ä½¿ã„ã‚„ã™ã„æœ€æ–°ã‹ã¤å®‰å®šã—ãŸOSã€ã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã‚ã‚‹" \
			"4" "ğŸŒ‰ Arch:ã€Œã‚·ãƒ³ãƒ—ãƒªã‚·ãƒ†ã‚£ã€ã€ã€ŒãƒŸãƒ‹ãƒãƒªã‚ºãƒ ã€ã€ã€Œã‚¨ãƒ¬ã‚¬ãƒ³ã‚¹ã€ã•ã€ã‚³ãƒ¼ãƒ‰ã®æ­£ã—ã•ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦é–‹ç™ºã•ã‚Œã¦ã„ã‚‹" \
			"5" "ğŸ‘’ Fedora:ãƒ¬ãƒƒãƒ‰ãƒãƒƒãƒˆãŒæ”¯æ´ã™ã‚‹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼ã€ŒFedora Projectã€ã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚Œã¦ã„ã‚‹RPMç³»Linux distro" \
			"6" "ğŸ± manjaro,centos,alpine,puppy" \
			"7" "ğŸ‰ Kali Rolling:ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã‚’ä¸»ãªç›®çš„ã¨ã—ã¦ã„ã‚‹" \
			"8" "ğŸŠ Armbian:ARMé–‹ç™ºãƒœãƒ¼ãƒ‰ç”¨ã®DebianãŠã‚ˆã³Ubuntuãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§ã™" \
			"9" "ğŸ¦ chrootå°‚å±ã™ã‚‹:deepin20,opensuse" \
			"10" "ğŸ“ ä½“é¨“ç‰ˆ,ã‚µãƒãƒ¼ãƒˆã•ã‚Œãªããªã‚Šã¾ã—ãŸ:SteamOS,RaspiOS,Gentoo" \
			"0" "ğŸŒš æˆ»ã‚‹" \
			3>&1 1>&2 2>&3)
	}
	choose_which_gnu_linux_distro_zh() {
		SELECTED_GNU_LINUX=$(whiptail --title "GNU/Linux distros" --menu "æ‚¨æƒ³è¦å®‰è£…å“ªä¸ªGNU/Linuxå‘è¡Œç‰ˆ?" 0 50 0 \
			"1" "ğŸ­ betaå…¬æµ‹:Weekly build(æ¯å‘¨æ„å»ºGUIç‰ˆ)" \
			"2" "ğŸ¥ Debian:è‡´åŠ›äºè‡ªç”±" \
			"3" "ğŸ› Ubuntu:æˆ‘çš„å­˜åœ¨æ˜¯å› ç‚ºå¤§å®¶çš„å­˜åœ¨" \
			"4" "ğŸŒ‰ Arch:ç³»ç»Ÿè®¾è®¡ä»¥KISSä¸ºæ€»ä½“æŒ‡å¯¼åŸåˆ™" \
			"5" "ğŸ‘’ Fedora:çº¢å¸½ç¤¾åŒºç‰ˆ,æ–°æŠ€æœ¯è¯•éªŒåœº" \
			"6" "ğŸ± manjaro,centos,alpine,puppy" \
			"7" "ğŸ‰ Kali Rolling:è®¾è®¡ç”¨äºæ•°å­—å–è¯å’Œæ¸—é€æµ‹è¯•" \
			"8" "ğŸŠ Armbian:é¦™è•‰æ´¾,é¦™æ©™æ´¾(é¢„è£…xfce)" \
			"9" "ğŸ¦ chrootä¸“å±:deepin20,uos,opensuse" \
			"10" "ğŸ“ experimental(ä½“éªŒç‰ˆ,ä¸å†ç»´æŠ¤):SteamOS,RaspiOS" \
			"0" "ğŸŒš Return to previous menu è¿”å›ä¸Šçº§èœå•" \
			3>&1 1>&2 2>&3)
	}
	choose_which_gnu_linux_distro_en() {
		SELECTED_GNU_LINUX=$(whiptail --title "GNU/Linux distros" --menu "Which distribution do you want to install?" 0 50 0 \
			"1" "ğŸ­ beta version:Weekly build(Includes GUI)" \
			"2" "ğŸ¥ Debian is a distro composed of free and open-source software" \
			"3" "ğŸ› Ubuntu is the modern, open source OS." \
			"4" "ğŸŒ‰ Arch:simplicity,modernity,pragmatism,user centrality and versatility" \
			"5" "ğŸ‘’ Fedora:developed by the community-supported Fedora Project which is sponsored primarily by Red Hat" \
			"6" "ğŸ± manjaro,centos,alpine,puppy" \
			"7" "ğŸ‰ Kali is a Debian-derived distro designed for digital forensics and penetration testing" \
			"8" "ğŸŠ Armbian:ARM development boards OS" \
			"9" "ğŸ¦ chroot exclusive:deepin20,opensuse" \
			"10" "ğŸ“ experimental,no longer maintained:SteamOS,RaspiOS,Gentoo" \
			"0" "ğŸŒš Return to previous menu" \
			3>&1 1>&2 2>&3)
	}
	##############################
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) choose_which_gnu_linux_distro_zh ;;
	ja_JP.UTF-8) choose_which_gnu_linux_distro_ja ;;
	*) choose_which_gnu_linux_distro_en ;;
	esac

	case "${SELECTED_GNU_LINUX}" in
	0 | "") proot_container_menu ;;
	1) install_tmoe_weekly_build_edition ;;
	2) install_debian_gnu_linux_distro ;;
	3) install_ubuntu_gnu_linux_distro ;;
	4)
		DISTRO_NAME='arch'
		TMOE_LINUX_CONTAINER_DISTRO='arch'
		creat_container_edition_txt
		go_to_proot_management
		;;
	5) install_fedora_gnu_linux_distro ;;
	6) install_beta_containers ;;
	7)
		DISTRO_NAME='kali'
		DISTRO_CODE='rolling'
		TMOE_LINUX_CONTAINER_DISTRO='kali-rolling'
		creat_container_edition_txt
		go_to_proot_management
		;;
	8) install_armbian_linux_distro ;;
	9) install_chroot_exclusive_containers ;;
	10) install_alpha_containers ;;
	esac
	####################
	exit 0
}
##############################
install_tmoe_weekly_build_edition() {
	case ${ARCH_TYPE} in
	amd64 | i386 | arm64 | armhf) WEEKLY_BUILD_CONTAINER=true ;;
	*) distro_does_not_support ;;
	esac
	choose_de_en() {
		INSTALLDESKTOP=$(whiptail --title "Desktop environment" --menu \
			"TMOE/Azure Server will automatically build and release the latest DE container every week" 0 0 0 \
			"1" "ğŸ­ xfce(elegant, high compatibility)" \
			"2" "ğŸ¦– kde plasma5(beautiful and modern)" \
			"3" "ğŸ¦ lxqt" \
			"4" "ğŸŒ¿ mate(the continuation of GNOME 2)" \
			"5" "ğŸ•Šï¸ lxde(lightweight)" \
			"6" "Weekly schedule" \
			"7" "Request specific version" \
			"0" "ğŸŒš back =ï¿£Ï‰ï¿£=" \
			3>&1 1>&2 2>&3)
	}
	choose_de_zh() {
		INSTALLDESKTOP=$(whiptail --title "Desktop environment" --menu \
			"ä»¥ä¸‹å®¹å™¨å·²é¢„è£…æ¡Œé¢ç¯å¢ƒ,tmoe/azureæœåŠ¡å™¨æ¯å‘¨éƒ½ä¼šè‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒæœ€æ–°ç‰ˆ" 0 0 0 \
			"1" "ğŸ­ xfce(elegant, high compatibility)" \
			"2" "ğŸ¦– kde plasma5(é£æ ¼åä¸½çš„æ¡Œé¢ç¯å¢ƒ)" \
			"3" "ğŸ¦ lxqt" \
			"4" "ğŸŒ¿ mate(the continuation of GNOME 2)" \
			"5" "ğŸ•Šï¸ lxde(è½»é‡çº§)" \
			"6" "schedule è‡ªåŠ¨æ„å»ºè®¡åˆ’æ—¥ç¨‹è¡¨" \
			"7" "request è¯·æ±‚æ›´æ–°/å¢åŠ ç‰ˆæœ¬" \
			"0" "ğŸŒš back =ï¿£Ï‰ï¿£=" \
			3>&1 1>&2 2>&3)
	}
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) choose_de_zh ;;
	*) choose_de_en ;;
	esac
	case "${INSTALLDESKTOP}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		DESKTOP="xfce"
		choose_xfce_distro
		;;
	2)
		DESKTOP="kde"
		choose_kde_distro
		;;
	3)
		DESKTOP="lxqt"
		choose_lxqt_distro
		;;
	4)
		DESKTOP="mate"
		choose_mate_distro
		;;
	5)
		DESKTOP="lxde"
		choose_lxde_distro
		;;
	6) view_the_schedule ;;
	7) request_weekly_build_version ;;
	esac
	press_enter_to_return
	install_tmoe_weekly_build_edition
}
request_weekly_build_version() {
	TMOE_LINUX_WEEKLY_BUILD_ISSUE_URL="https://github.com/2moe/tmoe-linux/issues/22"
	printf "${BLUE}%s\n${RESET}" "${TMOE_LINUX_WEEKLY_BUILD_ISSUE_URL}"
	[[ ! -e /mnt/c/WINDOWS/system32/cmd.exe ]] || /mnt/c/WINDOWS/system32/cmd.exe "start ${TMOE_LINUX_WEEKLY_BUILD_ISSUE_URL}"
	case ${LINUX_DISTRO} in
	Android) am start -a android.intent.action.VIEW -d "${TMOE_LINUX_WEEKLY_BUILD_ISSUE_URL}" ;;
	*) su "${CURRENT_USER_NAME}" -c "xdg-open ${TMOE_LINUX_WEEKLY_BUILD_ISSUE_URL}" ;;
	esac
}
set_debian_sid_env() {
	DISTRO_NAME='debian'
	DISTRO_CODE='sid'
	NODE02_ENABLED=true
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
}
set_kali_rolling_env() {
	DISTRO_NAME='kali'
	DISTRO_CODE='rolling'
	NODE02_ENABLED=true
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
}
set_ubuntu_dev_env() {
	DISTRO_NAME='ubuntu'
	DISTRO_CODE='dev'
	NODE02_ENABLED=true
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
}
set_mint_tricia_env() {
	DISTRO_NAME='mint'
	DISTRO_CODE='tricia'
	NODE02_ENABLED=true
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
}
set_mint_ulyssa_env() {
	DISTRO_NAME='mint'
	DISTRO_CODE='ulyssa'
	NODE02_ENABLED=true
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
}
set_alpine_edge_env() {
	DISTRO_NAME='alpine'
	DISTRO_CODE='edge'
	NODE02_ENABLED=false
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
}
set_fedora_rawhide_env() {
	DISTRO_NAME='fedora'
	DISTRO_CODE='rawhide'
	NODE02_ENABLED=false
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
}
set_ubuntu_bionic_env() {
	DISTRO_NAME='ubuntu'
	DISTRO_CODE='bionic'
	NODE02_ENABLED=true
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
}
set_arch_latest_env() {
	DISTRO_NAME='arch'
	DISTRO_CODE=''
	NODE02_ENABLED=true
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}"
	creat_container_edition_txt
	go_to_proot_management
}
set_manjaro_stable_env() {
	DISTRO_NAME='manjaro'
	DISTRO_CODE='stable'
	NODE02_ENABLED=true
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
}
choose_mate_distro() {
	SELECTED_GNU_LINUX=$(whiptail --title "MATE DISTROS" --menu "Which distribution do you want to install?" 0 50 0 \
		"1" "ğŸ”ï¸ Alpine-edge" \
		"2" "ğŸ‘’ Fedora-rawhide" \
		"3" "ğŸ› Ubuntu-dev" \
		"4" "mint-tricia(amd64)" \
		"5" "mint-ulyssa(amd64)" \
		"0" "ğŸŒš Return to previous menu" \
		3>&1 1>&2 2>&3)
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1) set_alpine_edge_env ;;
	2)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_fedora_rawhide_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®MATEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	3)
		case ${ARCH_TYPE} in
		amd64) set_ubuntu_dev_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®MATEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	4)
		case ${ARCH_TYPE} in
		amd64) set_mint_tricia_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®MATEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	5)
		case ${ARCH_TYPE} in
		amd64) set_mint_ulyssa_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®MATEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	esac
}
choose_lxde_distro() {
	SELECTED_GNU_LINUX=$(whiptail --title "LXDE DISTROS" --menu "å¯¹äºLXDEæ¡Œé¢,å¼€å‘è€…ä»…é…ç½®äº†i386å’Œarmhfçš„è‡ªåŠ¨æ„å»ºä»»åŠ¡" 0 50 0 \
		"1" "ğŸ¥ Debian-sid" \
		"0" "ğŸŒš Return to previous menu" \
		3>&1 1>&2 2>&3)
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1)
		case ${ARCH_TYPE} in
		armhf | i386) set_debian_sid_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®LXDEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	esac
}
choose_lxqt_distro() {
	SELECTED_GNU_LINUX=$(whiptail --title "LXQT DISTROS" --menu "Which distribution do you want to install?" 0 50 0 \
		"1" "ğŸ› Ubuntu-dev" \
		"2" "ğŸ¥ Debian-sid" \
		"3" "ğŸ‘’ Fedora-rawhide" \
		"4" "ğŸŒ‰ Archlinux-latest" \
		"0" "ğŸŒš Return to previous menu" \
		3>&1 1>&2 2>&3)
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_ubuntu_dev_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®LXQTæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	2)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_debian_sid_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®LXQTæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	3) set_fedora_rawhide_env ;;
	4)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_arch_latest_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®LXQTæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	esac
}
choose_xfce_distro() {
	SELECTED_GNU_LINUX=$(whiptail --title "XFCE DISTROS" --menu "Which distribution do you want to install?" 0 50 0 \
		"1" "ğŸŒ‰ Archlinux-latest" \
		"2" "ğŸ› Ubuntu-dev" \
		"4" "Manjaro-stable" \
		"5" "ğŸ¥ Debian-sid" \
		"6" "ğŸ‘’ Fedora-rawhide" \
		"7" "ğŸ”ï¸ Alpine-edge" \
		"0" "ğŸŒš Return to previous menu" \
		3>&1 1>&2 2>&3)
	#"3" "ğŸ‰ Kali-rolling" \
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1) set_arch_latest_env ;;
	2)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_ubuntu_dev_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®XFCEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	3)
		case ${ARCH_TYPE} in
		amd64 | arm64 | armhf) set_kali_rolling_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®XFCEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	4)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_manjaro_stable_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®XFCEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	5) set_debian_sid_env ;;
	6) set_fedora_rawhide_env ;;
	7) set_alpine_edge_env ;;
	esac
}
choose_kde_distro() {
	SELECTED_GNU_LINUX=$(whiptail --title "KDE PLASMA DISTROS" --menu "If you are using proot,try using ubuntu-bionic.\nIf you are using chroot,you can choose anyone." 0 50 0 \
		"1" "ğŸ› Ubuntu bionic" \
		"2" "ğŸŒ‰ Arch:simplicity,modernity,pragmatism,user centrality and versatility" \
		"3" "ğŸ¦› Ubuntu dev" \
		"4" "ğŸ¥ Debian is a distro composed of free and open-source software" \
		"5" "ğŸ‘’ Fedora:developed by the community-supported Fedora Project" \
		"6" "ğŸ”ï¸ Alpine:Small. Simple. Secure." \
		"0" "ğŸŒš Return to previous menu" \
		3>&1 1>&2 2>&3)
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1)
		case ${ARCH_TYPE} in
		arm64 | armhf) set_ubuntu_bionic_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®PLASMAæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	2)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_arch_latest_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®XFCEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	3)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_ubuntu_dev_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®XFCEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	4)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_debian_sid_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®XFCEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	5)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_fedora_rawhide_env ;;
		*)
			printf "%s\n" "Sorry,tmoe-linuxå¼€å‘è€…æœªå¯¹å½“å‰æ¶æ„ï¼ˆ${ARCH_TYPE}ï¼‰é…ç½®XFCEæ¡Œé¢çš„è‡ªåŠ¨æ„å»ºä»»åŠ¡ã€‚"
			distro_does_not_support
			;;
		esac
		;;
	6) set_alpine_edge_env ;;
	esac
}
##############################
view_the_schedule() {
	cat <<-EOF
		${BOLD}${PURPLE}Weekly build${RESET}ï¼š
		${BOLD}${YELLOW}Tuesday/å‘¨äºŒ/ç«æ›œæ—¥${RESET}ï¼š
		TIMEï¼š"UTC 00:01 / CST 08:01"
			${GREEN}ubuntu-dev ${YELLOW}arm64  ${PURPLE}*  ${BLUE}kde+xfce+lxqt${RESET}
			${GREEN}ubuntu-dev ${YELLOW}amd64  ${PURPLE}*  ${BLUE}kde+xfce+lxqt+mate${RESET}

		TIMEï¼š"UTC 06:01 / CST 14:01"
			${GREEN}fedora-rawhide ${YELLOW}arm64  ${PURPLE}*  ${BLUE}kde+xfce+lxqt+mate${RESET}
			${GREEN}fedora-rawhide ${YELLOW}amd64  ${PURPLE}*  ${BLUE}kde+xfce+lxqt+mate${RESET}
			${GREEN}fedora-rawhide ${YELLOW}armhf ${PURPLE}* ${BLUE}xfce+lxqt${RESET}

		${BOLD}${YELLOW}Wednesday/å‘¨ä¸‰/æ°´æ›œæ—¥${RESET}ï¼š
		TIMEï¼š"UTC 00:01 / CST 08:01"
			${GREEN}arch ${YELLOW}arm64  ${PURPLE}*  ${BLUE}kde+xfce+lxqt${RESET}
			${GREEN}arch ${YELLOW}amd64  ${PURPLE}*  ${BLUE}kde+xfce+lxqt${RESET}
			${GREEN}arch ${YELLOW}armhf ${PURPLE}* ${BLUE}xfce${RESET}
			${GREEN}manjaro-stable ${YELLOW}arm64 ${PURPLE}* ${BLUE}xfce${RESET}   
			${GREEN}manjaro-stable ${YELLOW}amd64 ${PURPLE}* ${BLUE}xfce${RESET} 

		TIMEï¼š"UTC 06:01 / CST 14:01"
			${GREEN}debian-sid ${YELLOW}arm64  ${PURPLE}*  ${BLUE}kde+xfce+lxqt${RESET}
			${GREEN}debian-sid ${YELLOW}amd64  ${PURPLE}*  ${BLUE}kde+xfce+lxqt${RESET}
			${GREEN}debian-sid ${YELLOW}armhf ${PURPLE}* ${BLUE}xfce+lxde${RESET}
			${GREEN}debian-sid ${YELLOW}i386 ${PURPLE}* ${BLUE}lxde${RESET}

		${BOLD}${YELLOW}Thursday/å‘¨å››/æœ¨æ›œæ—¥${RESET}ï¼š
		TIMEï¼š"UTC 00:01 / CST 08:01"
			${GREEN}alpine-edge ${YELLOW}arm64  ${PURPLE}*  ${BLUE}kde+xfce+mate${RESET}
			${GREEN}alpine-edge ${YELLOW}amd64  ${PURPLE}*  ${BLUE}kde+xfce+mate${RESET}
			${GREEN}alpine-edge ${YELLOW}armhf ${PURPLE}* ${BLUE}kde+xfce+mate${RESET}

		${BOLD}${PURPLE}Monthly build${RESET}ï¼š
		${BOLD}${YELLOW}24å·/24th of every month${RESET}ï¼š
		TIMEï¼š"UTC 01:01 / CST 09:01"
			${GREEN}ubuntu-bionic ${YELLOW}arm64 ${PURPLE}* ${BLUE}kde${RESET}
			${GREEN}ubuntu-bionic ${YELLOW}armhf ${PURPLE}* ${BLUE}kde${RESET}
			${GREEN}linux mint-tricia ${YELLOW}amd64 ${PURPLE}* ${BLUE}mate${RESET}
			${GREEN}linux mint-ulyssa ${YELLOW}amd64 ${PURPLE}* ${BLUE}mate${RESET}

		${BOLD}${YELLOW}14å·+28å·ï¼Œ14th and 28th of every month${RESET}ï¼š
		TIMEï¼š"UTC 02:01 / CST 10:01"
			${GREEN}kali-rolling ${YELLOW}arm64 ${PURPLE}* ${BLUE}xfce${RESET}
			${GREEN}kali-rolling ${YELLOW}armhf ${PURPLE}* ${BLUE}xfce${RESET}
			${GREEN}kali-rolling ${YELLOW}amd64 ${PURPLE}* ${BLUE}xfce${RESET}

	EOF
}
install_debian_gnu_linux_distro() {
	source ${TMOE_SHARE_DIR}/container/debian/menu
}
###################
install_chroot_exclusive_containers() {
	RETURN_TO_WHERE='install_chroot_exclusive_containers'
	CLOUD_ROOTFS='false'
	#\nThe developer only maintains the chroot container in the following list.
	ALPHA_SYSTEM=$(
		whiptail --title "chroot exclusive containers" --menu "è™½ç„¶æ‚¨ä»å¯ä»¥ä½¿ç”¨prootè¿è¡Œä»¥ä¸‹å®¹å™¨,ä½†å¼€å‘è€…ä»…ç»´æŠ¤äº†chrootå®¹å™¨ã€‚" 0 55 0 \
			"1" "deepinæ·±åº¦/uosç»Ÿä¿¡(arm64,x86,x64)" \
			"2" "opensuse tumbleweed(å°èœ¥èœ´é£æ»šè‰)" \
			"0" "ğŸŒš Return to previous menu è¿”å›ä¸Šçº§èœå•" \
			3>&1 1>&2 2>&3
	)
	##############################
	case "${ALPHA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1) install_deepin_linux_distro ;;
	2)
		CLOUD_ROOTFS='true'
		install_opensuse_linux_distro
		;;
	esac
	###########################
	exit 0
}
###############
install_uos_eagle() {
	case "${ARCH_TYPE}" in
	amd64 | i386 | arm64) ;;
	*) distro_does_not_support ;;
	esac
	DISTRO_CODE='eagle'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	git_clone_deepin_distro
}
###########
install_deepin_apricot_amd64_and_i386() {
	case "${ARCH_TYPE}" in
	amd64 | i386) ;;
	*) distro_does_not_support ;;
	esac
	DISTRO_CODE='apricot'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	git_clone_deepin_distro
}
##############
install_deepin_camel_arm64() {
	case "${ARCH_TYPE}" in
	arm64) ;;
	*) distro_does_not_support ;;
	esac
	DISTRO_CODE='camel'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	git_clone_deepin_distro
}
##########
git_clone_deepin_distro() {
	[[ -e ${ROOTFS_DIR} ]] || mkdir -pv ${ROOTFS_DIR}
	cd ${ROOTFS_DIR}
	case "${ARCH_TYPE}" in
	amd64 | i386 | arm64)
		go_to_proot_management
		DEEPIN_ROOTFS_FILE_NAME="${DISTRO_NAME}-${DISTRO_CODE}_${ARCH_TYPE}-rootfs.tar.xz"
		if [ ! -e "${DEEPIN_ROOTFS_FILE_NAME}" ]; then
			TEMP_DIR=".DEEPIN_${ARCH_TYPE}-TEMP_FOLDER"
			[[ ! -e ${TEMP_DIR} ]] || rm -rfv ${TEMP_DIR}
			git clone --depth=1 ${AK2_GIT_URL}/${DISTRO_NAME}-${DISTRO_CODE}_${ARCH_TYPE}.git ${TEMP_DIR}
			cd ${TEMP_DIR}
			cat .container_linux_* >${DEEPIN_ROOTFS_FILE_NAME}
			mv -fv ${DEEPIN_ROOTFS_FILE_NAME} ../
			cd ..
			rm -rvf ${TEMP_DIR}
		fi
		bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
			sed "s/debian system/${DISTRO_NAME} system/g" |
			sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
			sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
		;;
	*) distro_does_not_support ;;
	esac
}
###############
install_deepin_linux_distro() {
	RETURN_TO_WHERE='install_deepin_linux_distro'
	ALPHA_SYSTEM=$(
		whiptail --title "DEEPIN" --menu "deepin20æ­£å¼ç‰ˆé‡‡å–ç»Ÿä¸€çš„è®¾è®¡é£æ ¼,ä»æ¡Œé¢ç¯å¢ƒ\nå’Œåº”ç”¨è¿›è¡Œé‡æ–°è®¾è®¡,å¸¦æ¥ç„•ç„¶ä¸€æ–°çš„è§†è§‰æ„Ÿå—" 0 50 0 \
			"1" "deepin20 apricot(amd64,i386) å¤§å°40M" \
			"2" "uos20 eagle(arm64,amd64,i386) å¤§å°38M" \
			"3" "deepin15.5 camel(arm64) å¤§å°78M" \
			"0" "ğŸŒš Back è¿”å›" \
			3>&1 1>&2 2>&3
	)
	##############################
	case "${ALPHA_SYSTEM}" in
	0 | "") install_chroot_exclusive_containers ;;
	1)
		DISTRO_NAME='deepin'
		install_deepin_apricot_amd64_and_i386
		;;
	2)
		DISTRO_NAME='uos'
		install_uos_eagle
		;;
	3)
		DISTRO_NAME='deepin'
		install_deepin_camel_arm64
		;;
	esac
	###########################
	exit 0
}
##############
install_alpha_containers() {
	CLOUD_ROOTFS='false'
	RETURN_TO_WHERE='install_alpha_containers'
	install_alpha_containers_ja() {
		ALPHA_SYSTEM=$(
			whiptail --title "Maintenance has ceased" --menu "å¤©èŒãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®é–‹ç™ºè€…ã¯ã€æ¬¡ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ã‚’ç¶­æŒã—ãªããªã‚Šã¾ã—ãŸ" 0 55 0 \
				"1" "OpenWRT:ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ãªã©ã®çµ„ã¿è¾¼ã¿ã‚·ã‚¹ãƒ†ãƒ ç”¨ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã¨ã—ã¦é–‹ç™ºã•ã‚Œã¦ã„ã‚‹" \
				"2" "ãƒ©ã‚ºãƒ™ãƒªãƒ¼ãƒ‘ã‚¤ OS buster" \
				"3" "Gentoo(arm64,armhf,x86,x64)" \
				"4" "Devuanã¯Debian ã‹ã‚‰æ´¾ç”Ÿã—ãŸLinuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹" \
				"5" "Huawei euler OS(arm64,x64)" \
				"6" "Amazon(arm64,x64)" \
				"7" "Oracle(arm64,x64)" \
				"8" "VMware photon OS(arm64,x64,optimized for cloud-native apps)" \
				"9" "Intel clear linux(x64)" \
				"10" "Slackware(armhf,x64,created by Patrick Volkerding in 1993" \
				"11" "SteamOS(x64,Valve steam os,based on Debian GNU/Linux)" \
				"0" "ğŸŒš æˆ»ã‚‹" \
				3>&1 1>&2 2>&3
		)
	}
	install_alpha_containers_zh() {
		ALPHA_SYSTEM=$(
			whiptail --title "Maintenance has ceased" --menu "è™½ç„¶æ‚¨ä»å¯ä»¥å®‰è£…åŸºç¡€å®¹å™¨,ä½†Tmoe-linuxå¼€å‘è€…å·²ä¸å†å¯¹ä»¥ä¸‹å®¹å™¨è¿›è¡Œç»´æŠ¤" 0 55 0 \
				"1" "OpenWRT(å¸¸è§äºè·¯ç”±å™¨ç­‰åµŒå…¥å¼è®¾å¤‡)" \
				"2" "Raspberry Pi OS æ¨¹è“æ´¾ buster" \
				"3" "Gentoo(arm64,armhf,x86,x64,è¿½æ±‚æé™é…ç½®å’Œæé«˜è‡ªç”±)" \
				"4" "Devuan(ä¸ä½¿ç”¨systemd,åŸºäºdebian)" \
				"5" "Huawei euler OS(arm64,x64,åä¸ºæ¬§æ‹‰,æœåŠ¡å™¨ç³»ç»Ÿ)" \
				"6" "Amazon(arm64,x64,äºšé©¬é€Šäº‘æœåŠ¡å™¨ç³»ç»Ÿ)" \
				"7" "Oracle(arm64,x64,ç”²éª¨æ–‡äº‘æœåŠ¡å™¨ç³»ç»Ÿ)" \
				"8" "VMware photon OS(arm64,x64,optimized for cloud-native apps)" \
				"9" "Intel clear linux(x64,ä¸“æ³¨äºæœåŠ¡å™¨çš„æ€§èƒ½ä¼˜åŒ–,åº”ç”¨äºäº‘ç¯å¢ƒ)" \
				"10" "Slackware(armhf,x64,created by Patrick Volkerding in 1993" \
				"11" "SteamOS(x64,è’¸æ±½å¹³å°å¼€å‘å•†Valveå‘è¡Œçš„æ¸¸æˆç³»ç»Ÿ,åŸºäºdebian)" \
				"0" "ğŸŒš è¿”å›ä¸Šçº§èœå•" \
				3>&1 1>&2 2>&3
		)
	}
	install_alpha_containers_en() {
		ALPHA_SYSTEM=$(
			whiptail --title "Maintenance has ceased" --menu "The developer of Tmoe-linux no longer maintain the following containers." 0 55 0 \
				"1" "OpenWRT is a Linux OS targeting embedded devices" \
				"2" "Raspberry Pi OS buster" \
				"3" "Gentoo(arm64,armhf,x86,x64)" \
				"4" "Devuan is a fork of Debian that uses sysvinit or OpenRC instead of systemd" \
				"5" "Huawei euler OS(arm64,x64)" \
				"6" "Amazon(arm64,x64)" \
				"7" "Oracle(arm64,x64)" \
				"8" "VMware photon OS(arm64,x64,optimized for cloud-native apps)" \
				"9" "Intel clear linux(x64)" \
				"10" "Slackware(armhf,x64,created by Patrick Volkerding in 1993" \
				"11" "SteamOS(x64,Valve steam os,based on Debian GNU/Linux)" \
				"0" "ğŸŒš Return to previous menu" \
				3>&1 1>&2 2>&3
		)
	}
	#SteamOS(x64,Valve steam os,based on Debian GNU/Linux)
	#"99" "Microsoft CBL-Mariner(x64,ä¸ºazureä¼˜åŒ–,ç”¨äºå¾®è½¯çš„äº‘åŸºç¡€è®¾æ–½å’Œè¾¹ç¼˜äº§å“å’ŒæœåŠ¡)" \
	#				"12" "Solus(x64)" \
	##############################
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) install_alpha_containers_zh ;;
	ja_JP.UTF-8) install_alpha_containers_ja ;;
	*) install_alpha_containers_en ;;
	esac
	case "${ALPHA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1) install_openwrt_linux_distro ;;
	2) install_raspios_linux_distro ;;
	3) install_gentoo_linux_distro ;;
	4) install_devuan_linux_distro ;;
	5) install_euler_linux_distro ;;
	6) install_amazon_linux_distro ;;
	7) install_oracle_linux_distro ;;
	8) install_photon_linux_distro ;;
	9) install_clear_linux_distro ;;
	10) install_slackware_linux_distro ;;
	11) install_steam_linux_distro ;;
	esac
	###########################
	exit 0
}
#########################
install_clear_linux_distro() {
	DISTRO_NAME='clear'
	TMOE_LINUX_CONTAINER_DISTRO='clear'
	case "${ARCH_TYPE}" in
	'amd64')
		creat_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
install_steam_linux_distro() {
	DISTRO_NAME='steamos'
	DISTRO_CODE='brewmaster'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	case "${ARCH_TYPE}" in
	'amd64')
		creat_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
install_puppy_linux_distro() {
	DISTRO_NAME='puppy'
	DISTRO_CODE='fossa'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	case "${ARCH_TYPE}" in
	'amd64')
		creat_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
install_euler_linux_distro() {
	DISTRO_NAME='euler'
	TMOE_LINUX_CONTAINER_DISTRO='euler'
	case "${ARCH_TYPE}" in
	'amd64' | 'arm64')
		creat_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
install_photon_linux_distro() {
	DISTRO_NAME='photon'
	TMOE_LINUX_CONTAINER_DISTRO='photon'
	case "${ARCH_TYPE}" in
	'amd64' | 'arm64')
		creat_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
install_amazon_linux_distro() {
	DISTRO_NAME='amazon'
	DISTRO_CODE='2'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	case "${ARCH_TYPE}" in
	'amd64' | 'arm64')
		creat_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
install_oracle_linux_distro() {
	DISTRO_NAME='oracle'
	DISTRO_CODE=8
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	case "${ARCH_TYPE}" in
	'arm64')
		creat_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	amd64)
		CLOUD_ROOTFS=true
		DISTRO_CODE=$(curl -L https://mirrors.bfsu.edu.cn/lxc-images/images/oracle/ | grep date | sed -E 's@<a (href)@\n\1@g' | awk -F 'href=' '{print $2}' | cut -d '"' -f 2 | tail -n 1 | cut -d '/' -f 1)
		TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
		creat_container_edition_txt
		go_to_proot_management
		linux_distro_common_model_04
		;;
	*) distro_does_not_support ;;
	esac
}
####################
git_clone_linux_distro_rootfs_01() {
	mkdir -pv ${ROOTFS_DIR}
	cd ${ROOTFS_DIR}
	ROOTFS_FILE_NAME="${TMOE_LINUX_CONTAINER_DISTRO}_${ARCH_TYPE}-rootfs.tar.xz"
	if [ ! -e "${ROOTFS_FILE_NAME}" ]; then
		TEMP_DIR=".${TMOE_LINUX_CONTAINER_DISTRO}-TEMP_FOLDER"
		[[ ! -e ${TEMP_DIR} ]] || rm -rfv ${TEMP_DIR}
		pwd
		git clone --depth=1 ${AK2_GIT_URL}/${TMOE_LINUX_CONTAINER_DISTRO}_${ARCH_TYPE}.git ${TEMP_DIR}
		cd ${TEMP_DIR}
		cat .container_linux_* >${ROOTFS_FILE_NAME}
		mv -fv ${ROOTFS_FILE_NAME} ../
		cd ..
		rm -rvf ${TEMP_DIR}
	fi
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed "s:debian-sid:${TMOE_LINUX_CONTAINER_DISTRO}:g" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
#######################
install_beta_containers() {
	CLOUD_ROOTFS='false'
	install_beta_containers_zh() {
		BETA_SYSTEM=$(
			whiptail --title "Beta features" --menu "å…¬æµ‹ç‰ˆå®¹å™¨å°†å¸¦ç»™æ‚¨åˆ«æ ·çš„æƒŠå–œ\nBeta container, endless fun." 0 55 0 \
				"1" "Manjaro(arm64,x64,è®©archæ›´æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨)" \
				"2" "ğŸ”ï¸ Alpine(åŸºäºmusl libcå’Œbusybox,è¶…ç²¾ç®€ç³»ç»Ÿ)" \
				"3" "CentOS(åŸºäºçº¢å¸½çš„ç¤¾åŒºä¼ä¸šæ“ä½œç³»ç»Ÿ)" \
				"4" "ğŸ¶ Puppy(x64,å°å·§ä¸”æ˜“ç”¨,é€Ÿåº¦å¿«)" \
				"5" "Void(åŸºäºxbpsåŒ…ç®¡ç†å™¨çš„ç‹¬ç«‹å‘è¡Œç‰ˆ)" \
				"6" "ğŸŒ¿ Mint(x86,x64,ç®€å•æ˜“ç”¨çš„ç³»ç»Ÿ)" \
				"0" "ğŸŒš Return to previous menu è¿”å›ä¸Šçº§èœå•" \
				3>&1 1>&2 2>&3
		)
	}
	install_beta_containers_ja() {
		BETA_SYSTEM=$(
			whiptail --title "Beta features" --menu "Beta container, endless fun." 0 55 0 \
				"1" "Manjaro:Archã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹" \
				"2" "ğŸ”ï¸ Alpine:ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚·ãƒ³ãƒ—ãƒ«ã•ãƒ»ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ã‚’é‡è¦–ã™ã‚‹ãƒ‘ãƒ¯ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹" \
				"3" "CentOS:RHELã¨æ©Ÿèƒ½çš„ã«äº’æ›æ€§ãŒã‚ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ãŸãƒ•ãƒªãƒ¼ã®Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹" \
				"4" "ğŸ¶ Puppy(x64,extremely low minimum system requirements)" \
				"5" "Void:ã‚¼ãƒ­ã‹ã‚‰è¨­è¨ˆãŠã‚ˆã³å®Ÿè£…ã•ã‚ŒãŸX Binary Package System" \
				"6" "ğŸŒ¿ Mint(x86,x64,æ´—ç·´ã•ã‚Œã€æœ€æ–°ã§å¿«é©ãªLinuxãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚’æä¾›ã™ã‚‹ã“ã¨)" \
				"0" "ğŸŒš æˆ»ã‚‹" \
				3>&1 1>&2 2>&3
		)
	}
	install_beta_containers_en() {
		BETA_SYSTEM=$(
			whiptail --title "Beta features" --menu "Beta container, endless fun." 0 55 0 \
				"1" "Manjaro:Free fast and secure Linux based operating system for everyone" \
				"2" "ğŸ”ï¸ Alpine:Small. Simple. Secure. Alpine Linux is a security-oriented, lightweight Linux distribution based on musl libc and busybox" \
				"3" "CentOS is a community-driven free software effort focused on delivering a robust open source ecosystem around a Linux platform" \
				"4" "ğŸ¶ Puppy(x64,extremely low minimum system requirements)" \
				"5" "Void is a general purpose operating system, based on the monolithic Linux kernel" \
				"6" "ğŸŒ¿ Mint(x86,x64,elegant, easy to use, up to date and comfortable GNU/Linux desktop distribution)" \
				"0" "ğŸŒš Return to previous menu" \
				3>&1 1>&2 2>&3
		)
	}
	##############################
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) install_beta_containers_zh ;;
	ja_JP.UTF-8) install_beta_containers_ja ;;
	*) install_beta_containers_en ;;
	esac

	case "${BETA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		DISTRO_NAME='manjaro'
		TMOE_LINUX_CONTAINER_DISTRO='manjaro'
		creat_container_edition_txt
		go_to_proot_management
		install_manjaro_linux_distro
		;;
	2)
		TMOE_LINUX_CONTAINER_DISTRO='alpine'
		install_alpine_linux_distro
		;;
	3)
		CLOUD_ROOTFS='true'
		install_centos_linux_distro
		;;
	4) install_puppy_linux_distro ;;
	5)
		TMOE_LINUX_CONTAINER_DISTRO='void'
		creat_container_edition_txt
		install_void_linux_distro
		;;
	6) install_mint_linux_distro ;;
	esac
	######################
	exit 0
}
#####################
install_ubuntu_gnu_linux_distro() {
	DISTRO_NAME='ubuntu'
	DISTRO_CODE='focal'
	DEB_BOOT_STRAP='false'
	RETURN_TO_WHERE='install_ubuntu_gnu_linux_distro'
	COMPATIBILITY_MODE='false'
	install_ubuntu_gnu_linux_distro_zh() {
		BETA_SYSTEM=$(
			whiptail --title "Which version do you want to install?" --menu "2020è‡³2025å¹´çš„é•¿æœŸæ”¯æŒç‰ˆä¸ºfocal 20.04(2020å¹´4æœˆæ­£å¼å‘å¸ƒ)\nè®¾x=å½“å‰å¹´ä»½,è‹¥x>=2022,åˆ™è¯·æ‰‹åŠ¨è¾“å…¥ç‰ˆæœ¬ä»£å·" 0 50 0 \
				"1" "ğŸ¦› 21.04 Hirsute Hippo å¤šæ¯›æ²³é¦¬" \
				"2" "ğŸ¦ 20.10 Groovy Gorilla æ™‚é«¦å¤§çŒ©çŒ©" \
				"3" "ğŸ± 20.04(LTS)Focal Fossa ç„¦é»é¦¬å³¶é•·å°¾ç‹¸è²“" \
				"4" "18.04(LTS)Bionic Beaver ä»¿ç”Ÿæµ·ç‹¸" \
				"5" "Compatibility mode å…¼å®¹æ¨¡å¼(ä»…å®‰è£…)" \
				"6" "Custom codeæ‰‹åŠ¨è¾“å…¥ç‰ˆæœ¬ä»£å·" \
				"7" "ä½¿ç”¨debootstrapæ‰‹åŠ¨æ„å»º" \
				"8" "Latest(è‡ªå‹•æª¢æ¸¬21.10)" \
				"0" "ğŸŒš Return to previous menu è¿”å›ä¸Šçº§èœå•" \
				3>&1 1>&2 2>&3
		)
	}
	#	"8" "ğŸ¿ï¸ 16.04(LTS)Xenial Xerus å¥½å®¢çš„éæ´²åœ°æ¾é¼ " \
	install_ubuntu_gnu_linux_distro_ja() {
		BETA_SYSTEM=$(
			whiptail --title "Which version do you want to install?" --menu "x =ç¾åœ¨ã®å¹´ã¨ã—ã¾ã™ã€x> = 2022ã®å ´åˆã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ãã ã•ã„" 0 50 0 \
				"1" "ğŸ¦› 21.04 Hirsute Hippo" \
				"2" "ğŸ¦ 20.10 Groovy Gorilla" \
				"3" "ğŸ± 20.04(LTS)Focal Fossaæ³¨ç›®ã‚’é›†ã‚ã‚‹ãƒ•ã‚©ãƒƒã‚µ" \
				"4" "18.04(LTS)Bionic Beaver" \
				"5" "äº’æ›ãƒ¢ãƒ¼ãƒ‰" \
				"6" "ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰" \
				"7" "debootstrapã‚’ä½¿ç”¨ã—ã¦æ‰‹å‹•ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹" \
				"8" "Latest(æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è‡ªå‹•çš„ã«æ¤œå‡º)" \
				"0" "ğŸŒš æˆ»ã‚‹" \
				3>&1 1>&2 2>&3
		)
	}
	install_ubuntu_gnu_linux_distro_en() {
		BETA_SYSTEM=$(
			whiptail --title "Which version do you want to install?" --menu "The long-term support version from 2020 to 2025 is focal(20.04).\nLet x = current year, if x>=2022,then customize the version code" 0 50 0 \
				"1" "ğŸ¦› 21.04 Hirsute Hippo" \
				"2" "ğŸ¦ 20.10 Groovy Gorilla" \
				"3" "ğŸ± 20.04(LTS)Focal Fossa" \
				"4" "18.04(LTS)Bionic Beaver" \
				"5" "Compatibility mode" \
				"6" "Custom code" \
				"7" "Manually build using debootstrap" \
				"8" "Latest" \
				"0" "ğŸŒš Return to previous menu" \
				3>&1 1>&2 2>&3
		)
	}
	#ğŸ¦¦
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) install_ubuntu_gnu_linux_distro_zh ;;
	ja_JP.UTF-8) install_ubuntu_gnu_linux_distro_ja ;;
	*) install_ubuntu_gnu_linux_distro_en ;;
	esac
	##############################
	case "${BETA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1) DISTRO_CODE='hirsute' ;;
	2) DISTRO_CODE='groovy' ;;
	3) DISTRO_CODE='focal' ;;
	4) DISTRO_CODE='bionic' ;;
	5)
		COMPATIBILITY_MODE='true'
		custom_ubuntu_version
		;;
	6) custom_ubuntu_version ;;
	7) debootstrap_ubuntu_distro ;;
	8) check_the_latest_ubuntu_version ;;
	esac
	######################
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
	####################
	exit 0
}
#########################
check_ubuntu_distro_code() {
	case ${DISTRO_CODE} in
	bionic | xenial | eoan) ;;
	*)
		case "${ARCH_TYPE}" in
		"i386")
			printf "%s\n" "å·²ä¸å†æä¾›${DISTRO_CODE}çš„i386é•œåƒ,å°†ä¸ºæ‚¨é™çº§åˆ°18.04-bionic"
			DISTRO_CODE='bionic'
			;;
		esac
		;;
	esac
	printf "%s\n" "å³å°†ä¸ºæ‚¨å®‰è£…Ubuntu ${DISTRO_CODE} GNU/Linux container"
	do_you_want_to_continue
	install_different_ubuntu_gnu_linux_distros
}
##############
custom_ubuntu_version() {
	#12 50
	TARGET=$(whiptail --inputbox "è¯·è¾“å…¥ubuntuç‰ˆæœ¬ä»£å·ï¼Œä¾‹å¦‚focal(è‹±æ–‡å°å†™)\nPlease type the ubuntu version code." 9 50 --title "UBUNTU CODE" 3>&1 1>&2 2>&3)
	#[[ "$?" = 0 ]] || ${RETURN_TO_WHERE} #æ­¤è™•ä¸è¦åˆ¤æ–·é€€å‡ºç‹€æ…‹
	DISTRO_CODE="$(printf '%s\n' "${TARGET}" | head -n 1 | cut -d ' ' -f 1)"
	if [ -z "${DISTRO_CODE}" ]; then
		printf "%s\n" "æ£€æµ‹åˆ°æ‚¨å–æ¶ˆäº†æ“ä½œ"
		printf "%s\n" "å·²è‡ªåŠ¨åˆ‡æ¢ä¸ºubuntu20.04(ä»£å·focal)"
		DISTRO_CODE='focal'
	fi
}
#################
debootstrap_ubuntu_distro() {
	case ${TMOE_CHROOT} in
	true) ;;
	*)
		if [[ ${LINUX_DISTRO} = 'Android' ]]; then
			printf "%s\n" "Sorry,æš‚ä¸æ”¯æŒæ‚¨çš„ç³»ç»Ÿã€‚"
			printf "%s\n" "è¯·æ¢ç”¨chrootå®¹å™¨ã€‚"
			press_enter_to_return
			install_ubuntu_gnu_linux_distro
		fi
		;;
	esac
	[[ $(command -v debootstrap) ]] || ${TMOE_INSTALLATION_COMMAND} debootstrap
	custom_ubuntu_version
	printf "%s\n" "${DISTRO_CODE}"
	do_you_want_to_continue
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	#æ­¤å¤„é‡å¤åˆ›å»ºå¹¶éå¤šä½™
	creat_container_edition_txt
	if [ ! -e "${DEBIAN_CHROOT}" ]; then
		DEB_BOOT_STRAP='true'
		printf "%s\n" "${DEBIAN_CHROOT}"
		link_debootstrap_script
		${TMOE_PREFIX} mkdir -pv ${DEBIAN_CHROOT}
		case ${ARCH_TYPE} in
		amd64 | i386) UBUNTU_MIRROR_URL="http://mirrors.bfsu.edu.cn/ubuntu" ;;
		*) UBUNTU_MIRROR_URL="http://mirrors.bfsu.edu.cn/ubuntu-ports" ;;
		esac
		#--include=apt-utils,curl,ca-certificates,locales,locales-all,whiptail,apt-transport-https
		${TMOE_PREFIX} debootstrap --no-check-gpg --arch ${ARCH_TYPE} --components=main,restricted,universe,multiverse --variant=minbase --include=init,locales,ca-certificates,openssl ${DISTRO_CODE} ${DEBIAN_CHROOT} ${UBUNTU_MIRROR_URL}
		printf "%s\n" "DEBOOTSTRAP_DIR=${DEBIAN_CHROOT}" >${CONFIG_FOLDER}/debootstrap_dir.txt
	fi
	#debootstrap --no-check-gpg --arch arm64 --include=gawk,libblkid1,libbz2-1.0,libc6,libcom-err2,libcrypt1,libdebconfclient0,libext2fs2,libgcc-s1,libgmp10,liblzma5,libnss-nis,libnss-nisplus,libpam-modules-bin,libpam0g,libpcre3,libselinux1,libss2,libtinfo6,libuuid1,tar,zlib1g --variant=minbase sid ./sid ${UBUNTU_MIRROR_URL}
	#
}
#############
ubuntu_distro_x64_model() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s/focal/${DISTRO_CODE}/g" |
		sed 's@ARCH_TYPE\}/default@ARCH_TYPE\}/cloud@' |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		sed "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" |
		sed "s:/${DISTRO_NAME}-ports:/${DISTRO_NAME}:g" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
############
ubuntu_distro_arm_model() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s/focal/${DISTRO_CODE}/g" |
		sed 's@ARCH_TYPE\}/default@ARCH_TYPE\}/cloud@' |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		sed "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
########
ubuntu_distro_x64_model_02() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s/focal/${DISTRO_CODE}/g" |
		sed 's@ARCH_TYPE\}/default@ARCH_TYPE\}/cloud@' |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		sed "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" |
		sed "s:/${DISTRO_NAME}-ports:/${DISTRO_NAME}:g" |
		sed "/usermod -a/d" |
		sed "/groupadd /d" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
############
ubuntu_distro_arm_model_02() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s/focal/${DISTRO_CODE}/g" |
		sed 's@ARCH_TYPE\}/default@ARCH_TYPE\}/cloud@' |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		sed "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
########
linux_distro_common_model_01() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		sed "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" |
		sed "/usermod -a/d" |
		sed "/groupadd /d" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
####################
#02ä¸ºkali-rolling
linux_distro_common_model_02() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed 's@ARCH_TYPE\}/default@ARCH_TYPE\}/cloud@' |
		sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		sed "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE_02}:g" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
#########################
#03ä¸ºarch linux
#############
#04ä¸ºfedoraå’Œcentos
linux_distro_common_model_04() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed 's@ARCH_TYPE\}/default@ARCH_TYPE\}/cloud@' |
		sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		sed "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
####################
install_different_ubuntu_gnu_linux_distros() {
	case ${COMPATIBILITY_MODE} in
	true)
		case "${ARCH_TYPE}" in
		amd64 | i386) ubuntu_distro_x64_model_02 ;;
		*) ubuntu_distro_arm_model_02 ;;
		esac
		;;
	*)
		case "${ARCH_TYPE}" in
		amd64 | i386) ubuntu_distro_x64_model ;;
		*) ubuntu_distro_arm_model ;;
		esac
		;;
	esac
	#UBUNTU ppc64el/s390x/armæ¶æ„éœ€ä½¿ç”¨portsæº
}
############
check_the_latest_ubuntu_version() {
	LXC_IMAGES_REPO="https://mirrors.bfsu.edu.cn/lxc-images/images/${DISTRO_NAME}/"
	DISTRO_CODE=$(curl -L ${LXC_IMAGES_REPO} | grep date | cut -d '=' -f 4 | cut -d '"' -f 2 | egrep -v 'size|bionic|cosmic|disco|eoan|focal|trusty|xenial|groovy|hirsute' | tail -n 1)
	if [ -z ${DISTRO_CODE} ]; then
		printf "%s\n" "æœªæ£€æµ‹åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå°†è‡ªåŠ¨è·å–ubuntu 21.04 hirsute"
		DISTRO_CODE='hirsute'
		do_you_want_to_continue
	fi
}
##########
install_kali_rolling_gnu_linux_distro() {
	DISTRO_NAME='kali'
	DISTRO_CODE='rolling'
	DISTRO_CODE_02='current'
	linux_distro_common_model_02
}
#####################
install_arch_linux_distro() {
	DISTRO_NAME='archlinux'
	DISTRO_CODE='latest'
	DISTRO_CODE_02='current'
	case ${ARCH_TYPE} in
	armhf)
		bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
			sed 's@${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@https://mirrors.bfsu.edu.cn/archlinuxarm/os/ArchLinuxARM-armv7-latest.tar.gz@g' |
			sed "s/debian system/${DISTRO_NAME} system/g" |
			sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
			sed 's:rootfs.tar.xz:rootfs.tar.gz:g' |
			sed "s:Debian GNU/Linux:${DISTRO_NAME}:g")"
		;;
	amd64 | arm64) linux_distro_common_model_03 ;;
	*) distro_does_not_support ;;
	esac
}
############
check_the_latest_distro_version() {
	LXC_IMAGES_REPO="https://mirrors.bfsu.edu.cn/lxc-images/images/${DISTRO_NAME}/"
	DISTRO_CODE=$(curl -sL ${LXC_IMAGES_REPO} | grep date | tail -n 1 | cut -d '=' -f 4 | cut -d '"' -f 2)
	which_version_do_you_want_to_install
}
#################
case_cloud_rootfs_01_04() {
	case ${CLOUD_ROOTFS} in
	true) linux_distro_common_model_04 ;;
	*) linux_distro_common_model_01 ;;
	esac
}
###########
before_going_to_proot_menu() {
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
}
which_version_do_you_want_to_install() {
	if (whiptail --title "${DISTRO_NAME} VERSION" --yes-button "${DISTRO_CODE}" --no-button "${OLD_STABLE_VERSION}" --yesno "æ‚¨æƒ³è¦å®‰è£…å“ªä¸ªç‰ˆæœ¬ï¼ŸWhich version do you want to install?æ£€æµ‹åˆ°å½“å‰çš„æœ€æ–°ç‰ˆæœ¬(latest version)ä¸º${DISTRO_CODE}" 9 50); then
		before_going_to_proot_menu
		case_cloud_rootfs_01_04
	else
		DISTRO_CODE="${OLD_STABLE_VERSION}"
		before_going_to_proot_menu
		case_cloud_rootfs_01_04
	fi
}
######################
fedora_distro_menu() {
	RETURN_TO_WHERE='fedora_distro_menu'
	BETA_SYSTEM=$(
		whiptail --title "Fedora" --menu "æ‚¨æƒ³è¦å®‰è£…å“ªä¸ªFedoraç‰ˆæœ¬ï¼Ÿ\nWhich version do you want to install?" 0 0 0 \
			"1" "Auto check è‡ªåŠ¨æ£€æµ‹ç‰ˆæœ¬" \
			"2" "34 rawhide(For testing only)" \
			"0" "ğŸŒš Return to previous menu è¿”å›ä¸Šçº§èœå•" \
			3>&1 1>&2 2>&3
	)
	##############################
	case "${BETA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		OLD_STABLE_VERSION=$(curl -L https://mirrors.bfsu.edu.cn/lxc-images/images/fedora/ | grep date | tail -n 2 | head -n 1 | cut -d '=' -f 4 | cut -d '"' -f 2)
		check_the_latest_distro_version
		;;
	2)
		DISTRO_CODE=34
		#case ${ARCH_TYPE} in
		#amd64) CORRENT_SHA256SUM='4f8471bb8402d8b903fbe0a4944df5f935a6b32b0a3032e645ac6881a60ef4dc' ;;
		#arm64) CORRENT_SHA256SUM='504be6ae28e26f3d94166e480fc8b59f1c7e469df0d7de510056c951f9ce50d5' ;;
		#esac
		git_clone_fedora_rootfs
		;;
	esac
	######################
	press_enter_to_return
	tmoe_manager_main_menu
}
#########################
git_clone_fedora_rootfs() {
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
	[[ -e ${ROOTFS_DIR} ]] || mkdir -pv ${ROOTFS_DIR}
	cd ${ROOTFS_DIR}
	FEDORA_ROOTFS_FILE="fedora-${DISTRO_CODE}_${ARCH_TYPE}-rootfs.tar.xz"
	FEDORA_TEMP_FOLDER=".${FEDORA_ROOTFS_FILE}_TEMP_FOLDER"
	if [[ ! -s "${FEDORA_ROOTFS_FILE}" ]]; then
		rm -rv ${FEDORA_TEMP_FOLDER} 2>/dev/null
		git clone --depth=1 ${AK2_GIT_URL}/fedora-${DISTRO_CODE}_${ARCH_TYPE} ${FEDORA_TEMP_FOLDER}
		mv -f ${FEDORA_TEMP_FOLDER}/fedora-${DISTRO_CODE}_${ARCH_TYPE}.tar.xz ${ROOTFS_DIR}/${FEDORA_ROOTFS_FILE}
		rm -rvf ${FEDORA_TEMP_FOLDER}
	fi
	case ${DISTRO_CODE} in
	33)
		bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
			sed "s/debian system/${DISTRO_NAME} system/g" |
			sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
			sed "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" |
			sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
		;;
	34)
		bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
			sed "s/debian system/${DISTRO_NAME} system/g" |
			sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
			sed "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" |
			sed "s@\(FEDORA_VERSION=\).*@\129@g" |
			sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
		#å½“ç‰ˆæœ¬ä½äº30ï¼Œæˆ–ä¸ºrawhideæ—¶ä¸ä¼šè‡ªåŠ¨æ¢æº
		;;
	esac
}
###################
install_fedora_gnu_linux_distro() {
	#touch ~/.REDHATDetectionFILE
	DISTRO_NAME='fedora'
	TMOE_LINUX_CONTAINER_DISTRO='fedora'
	CLOUD_ROOTFS='true'
	case "${ARCH_TYPE}" in
	armel | i386) distro_does_not_support ;;
	armhf)
		DISTRO_CODE=33
		TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
		creat_container_edition_txt
		go_to_proot_management
		[[ -e ${ROOTFS_DIR} ]] || mkdir -pv ${ROOTFS_DIR}
		cd ${ROOTFS_DIR}
		FEDORA_ROOTFS_FILE='fedora-33_armhf-rootfs.tar.xz'
		FEDORA_TEMP_FOLDER=".${FEDORA_ROOTFS_FILE}_TEMP_FOLDER"
		if [[ ! -s "${FEDORA_ROOTFS_FILE}" ]]; then
			rm -rv ${FEDORA_TEMP_FOLDER} 2>/dev/null
			git clone --depth=1 ${AK2_GIT_URL}/fedora-33_armhf ${FEDORA_TEMP_FOLDER}
			mv -f ${FEDORA_TEMP_FOLDER}/${FEDORA_ROOTFS_FILE} ${ROOTFS_DIR}
			rm -rvf ${FEDORA_TEMP_FOLDER}
		fi
		: <<\EOF
		#CORRENT_SHA256SUM='bec3047102e6edbb834735233713f45ef085f9b8e46f493f39732f53891d3a0e'
		printf "%s\n" 'Verifying sha256hash...'
		printf "%s\n" 'æ­£åœ¨æ ¡éªŒsha256å“ˆå¸Œå€¼...'
		printf "%s\n" "${CORRENT_SHA256SUM}"
		LOCAL_SHA256SUM=$(sha256sum ${FEDORA_ROOTFS_FILE} | cut -c 1-64)
		case ${LOCAL_SHA256SUM} in
		"${CORRENT_SHA256SUM}") printf "%s\n" "Congratulationsï¼æ£€æµ‹åˆ°sha256å“ˆå¸Œå€¼ä¸æºæ–‡ä»¶ä¸€è‡´ã€‚" ;;
		esac
EOF
		linux_distro_common_model_01
		;;
	*)
		#OLD_STABLE_VERSION='31'
		fedora_distro_menu
		;;
	esac
}
#######################
linux_distro_common_model_03() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		sed "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE_02}:g" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME}:g")"
}
#################
install_void_linux_distro() {
	DISTRO_NAME='voidlinux'
	DISTRO_CODE='default'
	DISTRO_CODE_02='current'
	linux_distro_common_model_03
}
##########################
install_centos_linux_distro() {
	#touch ~/.REDHATDetectionFILE
	DISTRO_NAME='centos'
	case "${ARCH_TYPE}" in
	"armhf" | "i386")
		printf "%s\n" "æ£€æµ‹åˆ°CentOS 8ä¸æ”¯æŒæ‚¨å½“å‰çš„æ¶æ„ï¼Œå°†ä¸ºæ‚¨é™çº§è‡³CentOS 7"
		DISTRO_CODE='7'
		TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
		creat_container_edition_txt
		go_to_proot_management
		linux_distro_common_model_04
		;;
	*)
		OLD_STABLE_VERSION='8'
		check_the_latest_distro_version
		#DISTRO_CODE='8'
		#linux_distro_common_model_01
		;;
	esac
}
######################
install_gentoo_linux_distro() {
	DISTRO_NAME='gentoo'
	TMOE_LINUX_CONTAINER_DISTRO='gentoo'
	case "${ARCH_TYPE}" in
	'arm64')
		#printf "%s\n" "æ£€æµ‹åˆ°æ‚¨å½“å‰ä½¿ç”¨çš„æ˜¯arm64æ¶æ„ï¼Œå°†ä¸´æ—¶è¯†åˆ«ä¸ºarmhf"
		#NEW_TMOE_ARCH='armhf'
		#TMOE_QEMU_ARCH=""
		#ARCH_TYPE='armhf'
		#creat_tmoe_arch_file
		creat_container_edition_txt
		go_to_proot_management
		DISTRO_CODE='current'
		#sed '45 a\ARCH_TYPE="armhf"' |
		TUNA_LXC_IMAGE_MIRROR_REPO="https://mirrors.bfsu.edu.cn/gentoo/releases/arm64/autobuilds/current-stage3-arm64"
		TTIME=$(curl -L "${TUNA_LXC_IMAGE_MIRROR_REPO}/" | grep date | sed -E 's@<a (href)@\n\1@g' | awk -F 'href=' '{print $2}' | cut -d '"' -f 2 | egrep -v 'systemd|DIGESTS|CONTENTS.gz' | grep 'tar' | tail -n 1)
		bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
			sed "s@\${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@${TUNA_LXC_IMAGE_MIRROR_REPO}/${TTIME}@g" |
			sed 's/debian system/Gentoo system/g' |
			sed 's:debian-sid:gentoo-current:g' |
			sed 's:debian/sid:gentoo/current:g' |
			sed 's:Debian GNU/Linux:Gentoo GNU/Linux:g')"
		;;
	*)
		creat_container_edition_txt
		go_to_proot_management
		DISTRO_CODE='current'
		linux_distro_common_model_01
		;;
	esac
}
###########################
install_alpine_linux_distro() {
	touch ~/.ALPINELINUXDetectionFILE
	DISTRO_NAME='alpine'
	#DISTRO_CODE='3.11'
	DISTRO_CODE=$(curl -L https://mirrors.bfsu.edu.cn/lxc-images/images/alpine/ | egrep -v 'edge|3.7|3.8|3.9' | grep date | tail -n 1 | cut -d '=' -f 3 | cut -d '"' -f 2 | sed 's@/@@')
	OLD_STABLE_VERSION='edge'
	which_version_do_you_want_to_install
}
#####################
opensuse_warning() {
	case "${LINUX_DISTRO}" in
	Android)
		case ${TMOE_CHROOT} in
		true) ;;
		*)
			cat <<-EOF
				${RED}WARNINGï¼${RESET}æ£€æµ‹åˆ°æ‚¨ä½¿ç”¨çš„æ˜¯Androidç³»ç»Ÿã€‚
				æœ¬é•œåƒæ”¯æŒGNU/Linuxçš„proot/chrootå®¹å™¨,ä½†ä¸æ”¯æŒtermux-prootã€‚
				ç»æµ‹è¯•åœ¨termuxçš„prootç¯å¢ƒä¸‹å­˜åœ¨æ— æ³•æ£€ç´¢åˆ°è½¯ä»¶åŒ…çš„æƒ…å†µï¼Œä½†GNU/Linuxçš„prootå´ä¸å­˜åœ¨æ­¤é—®é¢˜ã€‚
				è‹¥æ‚¨æ‰§æ„è¦å®‰è£…OpenSUSE tumbleweed,åˆ™è¯·æŒ‰å›è½¦é”®ã€‚
			EOF
			do_you_want_to_continue
			;;
		esac
		;;
	esac
}
########
install_opensuse_linux_distro() {
	opensuse_warning
	DISTRO_NAME='opensuse'
	DISTRO_CODE='tumbleweed'
	TMOE_LINUX_CONTAINER_DISTRO='opensuse-tumbleweed'
	creat_container_edition_txt
	go_to_proot_management
	linux_distro_common_model_04
}
####################
install_raspios_linux_distro() {
	DISTRO_NAME='raspios'
	DISTRO_CODE='buster'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	case "${ARCH_TYPE}" in
	arm64 | armhf) NEW_TMOE_ARCH='armhf' ;;
	*) distro_does_not_support ;;
	esac

	case "${TRUE_ARCH_TYPE}" in
	arm64 | armhf)
		TMOE_QEMU_ARCH=""
		creat_tmoe_arch_file
		;;
	esac
	ARCH_TYPE="${NEW_TMOE_ARCH}"
	creat_container_edition_txt
	go_to_proot_management
	#touch ~/.RASPBIANARMHFDetectionFILE
	printf "%s\n" "æ£€æµ‹åˆ°æ‚¨é€‰æ‹©çš„æ˜¯æ ‘è“æ´¾ç³»ç»Ÿ"
	printf "%s\n" "å·²å°†æ‚¨çš„æ¶æ„ä¸´æ—¶è¯†åˆ«ä¸ºarmhf"
	printf "%s\n" "è‹¥æ‚¨éœ€è¦å®‰è£…${YELLOW}arm64${RESET}ç‰ˆçš„æ ‘è“æ´¾ç³»ç»Ÿï¼Œåˆ™è¯·å°†arm64ç‰ˆçš„RaspiOS rootfs.tar.xzæ–‡ä»¶é‡å‘½åä¸º${GREEN}raspios-buster_armhf_lite-rootfs.tar.xz${RESET},å¹¶å°†å…¶ç§»åŠ¨åˆ°${BLUE}${ROOTFS_DIR}${RESET}"
	if (whiptail --title "RASPIOS" --yes-button "FULL" --no-button "LITE" --yesno "æ‚¨æƒ³è¦å®‰è£…å“ªä¸ªç‰ˆæœ¬çš„raspiosï¼ŸFullç‰ˆçº¦1.9G,liteç‰ˆçº¦274M" 9 50); then
		install_raspios_full_armhf_rootfs
	else
		install_raspios_lite_armhf_rootfs
	fi
}
###################
install_raspios_lite_armhf_rootfs() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed 's@TUNA_LXC_IMAGE_MIRROR_REPO=.*@TUNA_LXC_IMAGE_MIRROR_REPO=https://mirrors.bfsu.edu.cn/raspberry-pi-os-images/raspios_lite_armhf/archive@' |
		sed 's@${TTIME}rootfs.tar.xz@${TTIME}root.tar.xz@g' |
		sed 's@#deb http@deb http@g' |
		sed 's@-rootfs.tar.xz@_lite-rootfs.tar.xz@g' |
		sed 's/.*sid main/#&/' |
		sed 's/debian system/raspios system/g' |
		sed 's:debian-sid:raspios-buster:g' |
		sed 's:Debian GNU/Linux:Raspios GNU/Linux:g')"
}
##################
install_raspios_full_armhf_rootfs() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed 's@TUNA_LXC_IMAGE_MIRROR_REPO=.*@TUNA_LXC_IMAGE_MIRROR_REPO=https://mirrors.bfsu.edu.cn/raspberry-pi-os-images/raspios_full_armhf/archive@' |
		sed 's@${TTIME}rootfs.tar.xz@${TTIME}root.tar.xz@g' |
		sed 's@#deb http@deb http@g' |
		sed 's@-rootfs.tar.xz@_full-rootfs.tar.xz@g' |
		sed 's/.*sid main/#&/' |
		sed 's/debian system/raspios system/g' |
		sed 's:debian-sid:raspios-buster:g' |
		sed 's:Debian GNU/Linux:Raspios GNU/Linux:g')"
}
##################
install_manjaro_linux_distro() {
	case ${ARCH_TYPE} in
	arm64)
		touch ~/.MANJARO_ARM_DETECTION_FILE
		bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
			sed 's@${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@https://mirrors.bfsu.edu.cn/osdn/storage/g/m/ma/manjaro-arm/.rootfs/Manjaro-ARM-aarch64-latest.tar.gz@g' |
			sed 's/debian system/manjaro system/g' |
			sed 's:debian-sid:manjaro-stable:g' |
			sed 's:debian/sid:manjaro/stable:g' |
			sed 's:rootfs.tar.xz:rootfs.tar.gz:g' |
			sed 's:Debian GNU/Linux:Manjaro GNU/Linux:g')"
		;;
	amd64)
		mkdir -pv ${ROOTFS_DIR}
		cd ${ROOTFS_DIR}
		MANJARO_ROOTFS_FILE_NAME="${DISTRO_NAME}-stable_${ARCH_TYPE}-rootfs.tar.xz"
		if [ ! -e "${MANJARO_ROOTFS_FILE_NAME}" ]; then
			TEMP_DIR=".MANJARO_AMD64-TEMP_FOLDER"
			[[ ! -e ${TEMP_DIR} ]] || rm -rfv ${TEMP_DIR}
			pwd
			git clone --depth=1 ${AK2_GIT_URL}/${DISTRO_NAME}-stable_${ARCH_TYPE}.git ${TEMP_DIR}
			cd ${TEMP_DIR}
			cat .container_linux_* >${MANJARO_ROOTFS_FILE_NAME}
			mv -fv ${MANJARO_ROOTFS_FILE_NAME} ../
			cd ..
			rm -rvf ${TEMP_DIR}
		fi
		bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
			sed "s/debian system/${DISTRO_NAME} system/g" |
			sed "s:debian-sid:${DISTRO_NAME}-stable:g" |
			sed "s:Debian GNU/Linux:Manjaro GNU/Linux:g")"
		;;
	*)
		printf "%s\n" "SORRY,Tmoe-linuxçš„å¼€å‘è€…æœªå¯¹æ‚¨çš„æ¶æ„è¿›è¡Œé€‚é…"
		distro_does_not_support
		#press_enter_to_return
		#install_beta_containers
		;;
	esac
}
#		sed 's@tar -pJxvf@tar -pzxvf@g'
############################
install_openwrt_linux_distro() {
	TMOE_LINUX_CONTAINER_DISTRO='openwrt'
	DISTRO_NAME='openwrt'
	creat_container_edition_txt
	go_to_proot_management
	touch ~/.ALPINELINUXDetectionFILE
	CONTAINER_REPO='https://mirrors.bfsu.edu.cn/openwrt/releases/'
	THE_LATEST_VERSION=$(curl -L ${CONTAINER_REPO} | egrep -v 'faillog|packages' | grep 'href' | tail -n 1 | cut -d '=' -f 3 | cut -d '"' -f 2 | cut -d '/' -f 1)
	THE_LATEST_ROOTFS_REPO="${CONTAINER_REPO}${THE_LATEST_VERSION}/targets/"
	case "${ARCH_TYPE}" in
	"amd64") THE_LATEST_ISO_LINK="${THE_LATEST_ROOTFS_REPO}x86/64/openwrt-${THE_LATEST_VERSION}-x86-64-generic-rootfs.tar.gz" ;;
	'i386') THE_LATEST_ISO_LINK="${THE_LATEST_ROOTFS_REPO}x86/generic/openwrt-${THE_LATEST_VERSION}-x86-generic-generic-rootfs.tar.gz" ;;
	"arm64") THE_LATEST_ISO_LINK="${THE_LATEST_ROOTFS_REPO}armvirt/64/openwrt-${THE_LATEST_VERSION}-armvirt-64-default-rootfs.tar.gz" ;;
	"armhf") THE_LATEST_ISO_LINK="${THE_LATEST_ROOTFS_REPO}armvirt/32/openwrt-${THE_LATEST_VERSION}-armvirt-32-default-rootfs.tar.gz" ;;
	esac
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s@\${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@${THE_LATEST_ISO_LINK}@g" |
		sed 's/debian system/openwrt system/g' |
		sed 's:debian-sid:openwrt-latest:g' |
		sed 's:debian/sid:openwrt/snapshot:g' |
		sed 's@tar -pJx@tar -pzx@g' |
		sed 's:Debian GNU/Linux:OpenWRT Linux:g')"
}
######################
install_devuan_linux_distro() {
	CLOUD_ROOTFS='true'
	DISTRO_NAME='devuan'
	#DISTRO_CODE='beowulf'
	#OLD_STABLE_VERSION=$(curl -L https://mirrors.bfsu.edu.cn/lxc-images/images/devuan/ | grep date | tail -n 2 | head -n 1 | cut -d '=' -f 4 | cut -d '"' -f 2)
	OLD_STABLE_VERSION=ascii
	check_the_latest_distro_version
}
######################
install_slackware_linux_distro() {
	DISTRO_NAME='slackware'
	TMOE_LINUX_CONTAINER_DISTRO='slackware'
	creat_container_edition_txt
	[[ -e ${ROOTFS_DIR} ]] || mkdir -pv ${ROOTFS_DIR}
	cd ${ROOTFS_DIR}
	#touch .SLACKDetectionFILE
	case "${ARCH_TYPE}" in
	amd64)
		go_to_proot_management
		if [ ! -e "slackware-current_amd64-rootfs.tar.xz" ]; then
			git clone -b x64 --depth=1 ${AK2_GIT_URL}/slackware_rootfs.git .SLACKWARE_AMD64_TEMP_FOLDER
			#aria2c --console-log-level=warn --no-conf -x 16 -s 16 -k 1M -o "slackware-current-rootfs.tar.xz" "https://cdn.tmoe.me/Tmoe-Debian-Tool/chroot/archive/slackware_amd64.tar.xz" || aria2c --console-log-level=warn --no-conf -x 16 -s 16 -k 1M -o "slackware-current-rootfs.tar.xz" "https://m.tmoe.me/down/share/Tmoe-linux/chroot/slackware_amd64.tar.xz"
			cd .SLACKWARE_AMD64_TEMP_FOLDER
			mv -f slackware_amd64.tar.xz ../slackware-current_amd64-rootfs.tar.xz
			cd ..
			rm -rf .SLACKWARE_AMD64_TEMP_FOLDER
		fi
		bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
			sed 's/debian system/slackware system/g' |
			sed 's:debian-sid:slackware-current:g' |
			sed 's:debian/sid:slackware/current:g' |
			sed 's:Debian GNU/Linux:Slackware GNU/Linux:g')"
		;;
	arm64 | armhf)
		NEW_TMOE_ARCH='armhf'
		TMOE_QEMU_ARCH=""
		creat_tmoe_arch_file
		ARCH_TYPE='armhf'
		go_to_proot_management
		#if [ ! -e "slackware-current_armhf-rootfs.tar.xz" ]; then
		printf "%s\n" "æ£€æµ‹åˆ°æ‚¨å½“å‰ä½¿ç”¨çš„æ˜¯${ARCH_TYPE}æ¶æ„ï¼Œå°†ä¸ºæ‚¨å®‰è£…armhfç‰ˆslackwareå®¹å™¨"
		SLACKWARE_ROOTFS_TUNA_REPO='https://mirrors.bfsu.edu.cn/slackwarearm/slackwarearm-devtools/minirootfs/roots'
		LatestSlack="$(curl -L ${SLACKWARE_ROOTFS_TUNA_REPO}/ | grep 'tar.xz' | tail -n 1 | cut -d '=' -f 3 | cut -d '"' -f 2)"
		#aria2c --console-log-level=warn --no-conf -x 5 -s 5 -k 1M -o "slackware-current_armhf-rootfs.tar.xz" "${SLACKWARE_ROOTFS_TUNA_REPO}/${LatestSlack}"
		#fi
		THE_LATEST_SLACKWARE_URL="${SLACKWARE_ROOTFS_TUNA_REPO}/${LatestSlack}"
		bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
			sed "s@\${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@${THE_LATEST_SLACKWARE_URL}@g" |
			sed 's/debian system/slackware system/g' |
			sed 's:debian-sid:slackware-current:g' |
			sed 's:debian/sid:slackware/current:g' |
			sed 's:Debian GNU/Linux:Slackware GNU/Linux:g')"
		;;
	*) distro_does_not_support ;;
	esac
}
#########################
distro_does_not_support() {
	printf "%s\n" "${PURPLE}Sorry${RESET},your architecture is ${BLUE}${ARCH_TYPE}${RESET}."
	printf "%s\n" "æ£€æµ‹åˆ°æ‚¨ä½¿ç”¨çš„æ˜¯${BLUE}${ARCH_TYPE}${RESET}æ¶æ„,è¯·å°è¯•${YELLOW}è·¨æ¶æ„${RESET}è¿è¡Œ,æˆ–æ¢ç”¨å…¶ä»–å‘è¡Œç‰ˆ"
	press_enter_to_return
	choose_which_gnu_linux_distro
}
##############
install_armbian_linux_distro() {
	RETURN_TO_WHERE='install_armbian_linux_distro'
	DISTRO_NAME='armbian'
	BETA_SYSTEM=$(
		whiptail --title "Which version do you want to install?" --menu "armbianæ˜¯ä¸“ä¸ºARMå¼€å‘æ¿(ä¾‹å¦‚nanopi,rock64,pine64ç­‰)æ‰“é€ çš„debian/ubuntuç³»ç»Ÿã€‚\nä»¥ä¸‹ç³»ç»Ÿå·²é¢„è£…æ¡Œé¢,æ¯ä¸ªé•œåƒå¤§å°çº¦ä¸º1G" 0 50 0 \
			"1" "ğŸ Bullseye(debian 11)" \
			"2" "ğŸ¦ Groovy Gorilla(ubuntu 20.10)" \
			"3" "ğŸ± Focal Fossa(ubuntu 20.04)" \
			"4" "Custom codeæ‰‹åŠ¨è¾“å…¥ç‰ˆæœ¬ä»£å·" \
			"5" "ğŸ¶ Buster(debian 10)" \
			"6" "Bionic Beaverä»¿ç”Ÿæµ·ç‹¸(ubuntu 18.04)" \
			"0" "ğŸŒš Return to previous menu è¿”å›ä¸Šçº§èœå•" \
			3>&1 1>&2 2>&3
	)
	##############################
	case "${BETA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1) DISTRO_CODE='bullseye' ;;
	2) DISTRO_CODE='groovy' ;;
	3) DISTRO_CODE='focal' ;;
	4) custom_armbian_version ;;
	5) DISTRO_CODE='buster' ;;
	6) DISTRO_CODE='bionic' ;;
	esac
	######################
	case "${ARCH_TYPE}" in
	arm64 | armhf) ;;
	*) distro_does_not_support ;;
	esac
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	creat_container_edition_txt
	go_to_proot_management
	printf "%s\n" "å³å°†ä¸ºæ‚¨å®‰è£…${TMOE_LINUX_CONTAINER_DISTRO} GNU/Linux container"
	do_you_want_to_continue
	install_different_armbian_gnu_linux_distros
	####################
	exit 0
}
#########################
install_different_armbian_gnu_linux_distros() {
	if [ ! $(command -v lz4) ]; then
		apt update 2>/dev/null
		apt install -y lz4 2>/dev/null || pacman -Syu --noconfirm lz4 2>/dev/null || zypper in -y lz4 2>/dev/null
	fi
	ARMBIAN_TUNA_REPO='https://mirrors.bfsu.edu.cn/armbian-releases/_rootfs'
	ARMBIAN_ROOTFS_FILE="$(curl -L ${ARMBIAN_TUNA_REPO}/ | grep "${DISTRO_CODE}-xfce-desktop" | egrep -v '\.tar\.lz4\.asc|\.torrent|\.lz4\.list' | grep ${ARCH_TYPE} | head -n 1 | cut -d '=' -f 3 | cut -d '"' -f 2)"
	ARMBIAN_ROOTFS_URL="${ARMBIAN_TUNA_REPO}/${ARMBIAN_ROOTFS_FILE}"
	case "${DISTRO_CODE}" in
	squeeze | wheezy | jessie | stretch | buster) install_armbian_buster_via_tuna ;;
	*) install_armbian_testing_via_tuna ;;
	esac
}
########
install_armbian_buster_via_tuna() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s@\${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@${ARMBIAN_ROOTFS_URL}@g" |
		sed "s/focal/${DISTRO_CODE}/g" |
		sed 's@rootfs.tar.xz@rootfs.tar.lz4@g' |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		sed 's@#deb http@deb http@g' |
		sed 's/.*sid main/#&/' |
		sed "s@stable/updates@${DISTRO_CODE}/updates@g" |
		sed "s@buster-backports@${DISTRO_CODE}-backports@g" |
		sed "s@debian/ stable@debian/ ${DISTRO_CODE}@g" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
###########
install_armbian_testing_via_tuna() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed "s@\${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@${ARMBIAN_ROOTFS_URL}@g" |
		sed "s/focal/${DISTRO_CODE}/g" |
		sed 's@rootfs.tar.xz@rootfs.tar.lz4@g' |
		sed "s/debian system/${DISTRO_NAME} system/g" |
		sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		sed 's@#deb http@deb http@g' |
		sed 's/.*sid main/#&/' |
		sed "s@stable/updates@${DISTRO_CODE}-security@g" |
		sed "s@buster-backports@${DISTRO_CODE}-backports@g" |
		sed "s@debian/ stable@debian/ ${DISTRO_CODE}@g" |
		sed "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
###########
custom_armbian_version() {
	TARGET=$(whiptail --inputbox "è¯·è¾“å…¥armbianç‰ˆæœ¬ä»£å·ï¼Œä¾‹å¦‚bullseye(è‹±æ–‡å°å†™)\nPlease type the armbian version code." 9 50 --title "ARMBIAN CODE" 3>&1 1>&2 2>&3)
	DISTRO_CODE="$(printf '%s\n' "${TARGET}" | head -n 1 | cut -d ' ' -f 1)"
	if [ -z "${DISTRO_CODE}" ]; then
		printf "%s\n" "æ£€æµ‹åˆ°æ‚¨å–æ¶ˆäº†æ“ä½œ"
		printf "%s\n" "å·²è‡ªåŠ¨åˆ‡æ¢ä¸ºarmbian bullseye"
		DISTRO_CODE='bullseye'
	fi
}
###########
install_mint_linux_distro() {
	case ${ARCH_TYPE} in
	amd64 | i386) which_linux_mint_distro ;;
	*)
		printf "%s\n" "${RED}WARNINGï¼${RESET}æ£€æµ‹åˆ°æ‚¨ä½¿ç”¨çš„æ˜¯${ARCH_TYPE}æ¶æ„"
		printf "%s\n" "Linux Mint${RED}ä¸æ”¯æŒ${RESET}æ‚¨çš„æ¶æ„"
		printf "%s\n" "è¯·æ¢ç”¨${YELLOW}amd64${RESET}æˆ–${YELLOW}i386${RESET}è®¾å¤‡åï¼Œå†æ¥å°è¯•"
		press_enter_to_return
		install_beta_containers
		;;
	esac
}
################
check_mint_version_code() {
	DISTRO_NAME='mint'
	OLD_STABLE_VERSION='ulyana'
	LXC_IMAGES_REPO="https://mirrors.bfsu.edu.cn/lxc-images/images/${DISTRO_NAME}/"
	DISTRO_CODE=$(curl -sL ${LXC_IMAGES_REPO} | grep date | cut -d '=' -f 4 | cut -d '"' -f 2 | egrep -v 'size|sarah|serena|sonya|sylvia|tara|tessa|tina|tricia|ulyana' | tail -n 1)
}
###########
which_linux_mint_distro() {
	RETURN_TO_WHERE='which_linux_mint_distro'
	DISTRO_NAME='mint'
	BETA_SYSTEM=$(
		whiptail --title "mint" --menu "æ‚¨æƒ³è¦å®‰è£…å“ªä¸ªMintç‰ˆæœ¬ï¼Ÿ\nWhich version do you want to install?" 0 0 0 \
			"1" "Auto check è‡ªåŠ¨æ£€æµ‹ç‰ˆæœ¬" \
			"2" "Custom codeæ‰‹åŠ¨è¾“å…¥ç‰ˆæœ¬ä»£å·" \
			"0" "ğŸŒš Return to previous menu è¿”å›ä¸Šçº§èœå•" \
			3>&1 1>&2 2>&3
	)
	##############################
	case "${BETA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		check_mint_version_code
		which_version_do_you_want_to_install
		;;
	2) custom_mint_version ;;
	esac
	######################
	press_enter_to_return
	tmoe_manager_main_menu
}
#########################
custom_mint_version() {
	TARGET=$(whiptail --inputbox "è¯·è¾“å…¥mintç‰ˆæœ¬ä»£å·ï¼Œä¾‹å¦‚ulyana(è‹±æ–‡å°å†™)\n Please enter the mint version code." 12 50 --title "MINT CODE" 3>&1 1>&2 2>&3)
	DISTRO_CODE="$(printf '%s\n' "${TARGET}" | head -n 1 | cut -d ' ' -f 1)"
	if [ -z "${DISTRO_CODE}" ]; then
		printf "%s\n" "æ£€æµ‹åˆ°æ‚¨å–æ¶ˆäº†æ“ä½œ"
		printf "%s\n" "å·²è‡ªåŠ¨åˆ‡æ¢ä¸ºulyana"
		DISTRO_CODE='ulyana'
	fi
	before_going_to_proot_menu
	printf "%s\n" "å³å°†ä¸ºæ‚¨å®‰è£…Mint ${DISTRO_CODE} GNU/Linux container"
	do_you_want_to_continue
	linux_distro_common_model_01
}
######################
