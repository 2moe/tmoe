#!/usr/bin/env bash
# set -x
############################################
choose_which_gnu_linux_distro() {
	source ${TMOE_SHARE_DIR}/container/qemu/qemu-user
	RETURN_TO_WHERE='choose_which_gnu_linux_distro'
	RETURN_TO_MENU='choose_which_gnu_linux_distro'
	CLOUD_ROOTFS=false
	DEB_BOOT_STRAP=false
	TMOE_LINUX_CONTAINER_DISTRO=''
	check_rootfs_dir
	[[ ! -e ${CONFIG_FOLDER}/debootstrap_dir.txt ]] || rm -fv ${CONFIG_FOLDER}/debootstrap_dir.txt
	unset NODE01_ENABLED WEEKLY_BUILD_CONTAINER
	TITLE="CONTAINERS"
	choose_which_gnu_linux_distro_ja() {
		MENU="ÂÆπÂô®„Çí„ÅäÈÅ∏„Å≥„Åè„Å†„Åï„ÅÑ"
		OPT_0="üåö Êàª„Çã"
		OPT_1="üç≠ ÊØéÈÄ±„ÅÆGUI„Éì„É´„Éâ(cutefish,kde,mate,xfce & lxqt)"
		OPT_2="üê≥ Rust,go,dotNET,nodejs,jdk,mongodb & docker"
		OPT_3="üç• Debian „ÅØ „Ç™„Éö„É¨„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç∑„Çπ„ÉÜ„É†„ÅÆ„Éï„É™„Éº„Å™„Éá„Ç£„Çπ„Éà„É™„Éì„É•„Éº„Ç∑„Éß„É≥„Åß„Åô"
		OPT_4="üçõ Ubuntu:ÈñãÁô∫ÁõÆÊ®ô„ÅØ„ÄåË™∞„Å´„Åß„ÇÇ‰Ωø„ÅÑ„ÇÑ„Åô„ÅÑÊúÄÊñ∞„Åã„Å§ÂÆâÂÆö„Åó„ÅüOS„Äç„ÇíÊèê‰æõ„Åô„Çã„Åì„Å®„Åß„ÅÇ„Çã"
		OPT_5="üåâ Arch:„Äå„Ç∑„É≥„Éó„É™„Ç∑„ÉÜ„Ç£„Äç„ÄÅ„Äå„Éü„Éã„Éû„É™„Ç∫„É†„Äç„ÄÅ„Äå„Ç®„É¨„Ç¨„É≥„Çπ„Äç„Åï„ÄÅ„Ç≥„Éº„Éâ„ÅÆÊ≠£„Åó„Åï„Å´ÁÑ¶ÁÇπ„ÇíÂΩì„Å¶„Å¶ÈñãÁô∫„Åï„Çå„Å¶„ÅÑ„Çã"
		OPT_6="üç± CentOS,alpine,mint,rocky & puppy"
		OPT_7="üêâ Kali rolling:„Éö„Éç„Éà„É¨„Éº„Ç∑„Éß„É≥„ÉÜ„Çπ„Éà„Çí‰∏ª„Å™ÁõÆÁöÑ„Å®„Åó„Å¶„ÅÑ„Çã"
		OPT_8="üçä Armbian:ARMÈñãÁô∫„Éú„Éº„ÉâÁî®„ÅÆDebian„Åä„Çà„Å≥Ubuntu„Éô„Éº„Çπ„ÅÆ„Ç≥„É≥„Éî„É•„Éº„Çø„Éº„Ç™„Éö„É¨„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç∑„Çπ„ÉÜ„É†„Åß„Åô"
		OPT_9="üëí Fedora:„É¨„ÉÉ„Éâ„Éè„ÉÉ„Éà„ÅåÊîØÊè¥„Åô„Çã„Ç≥„Éü„É•„Éã„ÉÜ„Ç£„Éº„ÄåFedora Project„Äç„Å´„Çà„Å£„Å¶ÈñãÁô∫„Åï„Çå„Å¶„ÅÑ„ÇãRPMÁ≥ªLinux distro"
		OPT_10="ü¶é ChrootÂ∞ÇÂ±û„Åô„Çã:opensuse"
		OPT_11="üçì ‰ΩìÈ®ìÁâà,„Çµ„Éù„Éº„Éà„Åï„Çå„Å™„Åè„Å™„Çä„Åæ„Åó„Åü:RaspiOS,Gentoo"
	}
	choose_which_gnu_linux_distro_zh() {
		MENU="ÊÇ®ÊÉ≥Ë¶ÅÂÆâË£ÖÂì™‰∏™ÂÆπÂô®?"
		OPT_0="üåö Return to previous menu ËøîÂõû‰∏äÁ∫ßËèúÂçï"
		OPT_1="üç≠ ÊØèÂë®ÊûÑÂª∫cutefish,kde,xfce,mate & lxqt"
		OPT_2="üê≥ Rust,go,dotNET,nodejs,jdk,mongodb & docker"
		OPT_3="üç• Debian:Ëá¥Âäõ‰∫éËá™Áî±"
		OPT_4="üçõ Ubuntu:ÊàëÁöÑÂ≠òÂú®ÊòØÂõ†ÁÇ∫Â§ßÂÆ∂ÁöÑÂ≠òÂú®"
		OPT_5="üåâ Arch:Á≥ªÁªüËÆæËÆ°‰ª•KISS‰∏∫ÊÄª‰ΩìÊåáÂØºÂéüÂàô"
		OPT_6="üç± CentOS,alpine,mint,rocky & puppy"
		OPT_7="üêâ Kali rolling:ËÆæËÆ°Áî®‰∫éÊï∞Â≠óÂèñËØÅÂíåÊ∏óÈÄèÊµãËØï"
		OPT_8="üçä Armbian:È¶ôËïâÊ¥æ,È¶ôÊ©ôÊ¥æ(È¢ÑË£Öxfce/cinnamon/budgie)"
		OPT_9="üëí Fedora:Á∫¢Â∏ΩÁ§æÂå∫Áâà,Êñ∞ÊäÄÊúØËØïÈ™åÂú∫"
		OPT_10="ü¶é Chroot‰∏ìÂ±û:opensuse"
		OPT_11="üçì Experimental(‰ΩìÈ™åÁâà):archcraft,Ê†ëËéìÊ¥æ"
	}
	choose_which_gnu_linux_distro_en() {
		MENU="Which container do you want to install?"
		OPT_0="üåö Return to previous menu"
		OPT_1="üç≠ Weekly builds(cutefish,xfce,kde,mate & lxqt)"
		OPT_2="üê≥ Rust,go,dotNET,nodejs,jdk,mongodb & docker"
		OPT_3="üç• Debian is a distro composed of free and open-source software"
		OPT_4="üçõ Ubuntu is the modern, open source OS."
		OPT_5="üåâ Arch:simplicity,modernity,pragmatism,user centrality and versatility"
		OPT_6="üç± CentOS,alpine,mint,rocky & puppy"
		OPT_7="üêâ Kali:designed for digital forensics and penetration testing"
		OPT_8="üçä Armbian:ARM development boards OS(gnome,cinnamon,budgie)"
		OPT_9="üëí Fedora:developed by the community-supported Fedora Project which is sponsored primarily by Red Hat"
		OPT_10="ü¶é Chroot exclusive:opensuse"
		OPT_11="üçì Experimental,no longer maintained:RaspiOS,Gentoo"
	}
	choose_which_gnu_linux_distro_menu() {
		SELECTED_GNU_LINUX=$(whiptail --title "${TITLE}" --menu "${MENU}" 0 50 0 \
			"1" "$OPT_1" \
			"2" "$OPT_2" \
			"3" "$OPT_3" \
			"4" "$OPT_4" \
			"5" "$OPT_5" \
			"6" "$OPT_6" \
			"7" "$OPT_7" \
			"8" "$OPT_8" \
			"9" "$OPT_9" \
			"10" "$OPT_10" \
			"11" "$OPT_11" \
			"0" "$OPT_0" \
			3>&1 1>&2 2>&3)
	}
	##############################
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) choose_which_gnu_linux_distro_zh ;;
	ja_JP.UTF-8) choose_which_gnu_linux_distro_ja ;;
	*) choose_which_gnu_linux_distro_en ;;
	esac
	choose_which_gnu_linux_distro_menu

	case "${SELECTED_GNU_LINUX}" in
	0 | "") proot_container_menu ;;
	1) install_tmoe_weekly_build_edition ;;
	2) install_tmoe_moonthly_build_edition ;;
	3) install_debian_gnu_linux_distro ;;
	4) install_ubuntu_gnu_linux_distro ;;
	5)
		DISTRO_NAME='arch'
		TMOE_LINUX_CONTAINER_DISTRO='arch'
		create_container_edition_txt
		go_to_proot_management
		;;
	6) install_beta_containers ;;
	7)
		DISTRO_NAME='kali'
		DISTRO_CODE='rolling'
		TMOE_LINUX_CONTAINER_DISTRO='kali-rolling'
		create_container_edition_txt
		go_to_proot_management
		;;
	8) install_armbian_linux_distro ;;
	9) install_fedora_gnu_linux_distro ;;
	10) install_chroot_exclusive_containers ;;
	11) install_alpha_containers ;;
	esac
	####################
	exit 0
}
##############################
set_service_container_env_01() {
	DISTRO_CODE="${DESKTOP}"
	DISTRO_NAME_02="${DISTRO_NAME}"
	NODE01_ENABLED=false
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_service_container_env_02() {
	DISTRO_CODE="${DESKTOP}"
	DISTRO_NAME_02="${DISTRO_NAME}"
	NODE01_ENABLED=false
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_service_container_env() {
	case ${DESKTOP} in
	alpine) set_service_container_env_02 ;;
	latest | *) set_service_container_env_01 ;;
	esac
}
#####################
choose_latest_or_alpine() {
	if (whiptail --title "TAGS" --yes-button "latest" --no-button "alpine" --yesno "In general, alpine is more streamlined" 8 50); then
		DESKTOP="latest"
	else
		DESKTOP="alpine"
	fi
}
install_tmoe_moonthly_build_edition() {
	choose_service_en() {
		INSTALLDESKTOP=$(whiptail --title "CONTAINERS" --menu \
			"Except docker, tmoe/azure server will automatically build and release the latest container every 2 weeks" 0 0 0 \
			"1" "ü¶Ä Rust(Blazingly fast and memory-efficient)" \
			"2" "üêπ Go (Makes it easy to build simple&reliable app)" \
			"3" "Visual Studio Code web server" \
			"4" "Microsoft .NET-SDK(amd64, amr64)" \
			"5" "OpenJDK(An open-source Java Platform)" \
			"6" "üê≥ Docker(Run docker with qemu)" \
			"7" "Node.js(A back-end JavaScript runtime environment)" \
			"8" "Nginx(A high-performance HTTP server)" \
			"9" "PHP(A general-purpose scripting language)" \
			"10" "MongoDB(Classified as a NoSQL database program)" \
			"11" "Ruby(An interpreted,general-purpose lang)" \
			"0" "üåö back =Ôø£œâÔø£=" \
			3>&1 1>&2 2>&3)
	}
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) choose_service_en ;;
	*) choose_service_en ;;
	esac
	case "${INSTALLDESKTOP}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		DISTRO_NAME="rust"
		choose_latest_or_alpine
		;;
	2)
		DISTRO_NAME="go"
		choose_latest_or_alpine
		;;
	3)
		DISTRO_NAME="code"
		DESKTOP="latest"
		;;
	4)
		DISTRO_NAME="dotnet"
		DESKTOP="latest"
		;;
	5)
		DISTRO_NAME="jdk"
		DESKTOP="latest"
		;;
	6)
		DISTRO_NAME="docker"
		DESKTOP="qemu"
		;;
	7)
		DISTRO_NAME="node"
		choose_latest_or_alpine
		;;
	8)
		DISTRO_NAME="nginx"
		choose_latest_or_alpine
		;;
	9)
		DISTRO_NAME="php"
		choose_latest_or_alpine
		;;
	10)
		DISTRO_NAME="mongo"
		DESKTOP="latest"
		;;
	11)
		DISTRO_NAME="ruby"
		choose_latest_or_alpine
		;;
	esac

	case "${DISTRO_NAME}" in
	rust)
		case ${ARCH_TYPE} in
		arm64 | armhf | amd64 | riscv64 | ppc64el | s390x | mips64el) WEEKLY_BUILD_CONTAINER=true ;;
		*) distro_does_not_support ;;
		esac
		;;
	dotnet)
		case ${ARCH_TYPE} in
		arm64 | amd64) WEEKLY_BUILD_CONTAINER=true ;;
		*) distro_does_not_support ;;
		esac
		;;
	*)
		case ${ARCH_TYPE} in
		arm64 | armhf | amd64) WEEKLY_BUILD_CONTAINER=true ;;
		*)
			printf "%s\n" "Sorry,this feature only supports arm64, amd64 & armhf"
			distro_does_not_support
			;;
		esac
		;;
	esac

	set_service_container_env
	press_enter_to_return
	install_tmoe_moonthly_build_edition
	: <<\EOF
	printf "%s\n" "${YELLOW}PREVIEW:${RESET}"
	printf "%s\n" "This category of containers will not automatically configure unnecessary steps."
	printf "%s\n" "A service or an environment is a container."
	printf "%s\n" "For example, you can type ${GREEN}tmoe p go${RESET} to start the ${BLUE}proot golang latest ${ARCH_TYPE}${RESET} container,if you are using tmoe-zsh ,just type ${GREEN}t p go${RESET}"
	printf "%s\n" "You can ${YELLOW}creat a new container${RESET} in the menu, just type the container name.If you type ${GREEN}1.16${RESET},then it will creat a new golang container.You can type ${GREEN}tmoe p go 1.16${RESET} to start it."

	printf "%s\n" "${RED}Sorry,${GREEN}this feature${YELLOW} is still ${BLUE}in alpha${RESET}"
	press_enter_to_return
	choose_which_gnu_linux_distro
EOF
}
##################################
install_tmoe_weekly_build_edition() {
	case ${ARCH_TYPE} in
	amd64 | i386 | arm64 | armhf) WEEKLY_BUILD_CONTAINER=true ;;
	*) distro_does_not_support ;;
	esac
	# TMOE/Azure Server will automatically build and release the latest DE container every week/month
	choose_de_en() {
		# MENU="Sorry, this feature will not be updated for a long time to come."
		MENU="TMOE/Azure Server will automatically build and release the latest DE container every week/month"
		INSTALLDESKTOP=$(whiptail --title "Desktop environment" --menu \
			"${MENU}" 0 0 0 \
			"1" "üê≠ xfce(elegant, high compatibility)" \
			"2" "ü¶ñ kde plasma5(beautiful and modern)" \
			"3" "üêü cutefish" \
			"4" "üåø mate(the continuation of GNOME 2)" \
			"5" "üê¶ lxqt" \
			"6" "üïäÔ∏è lxde(lightweight)" \
			"7" "zsh(nogui)" \
			"8" "Weekly schedule" \
			"0" "üåö back =Ôø£œâÔø£=" \
			3>&1 1>&2 2>&3)
	}
	choose_de_zh() {
		# MENU="Êä±Ê≠âÔºåÁî±‰∫éÊüê‰∫õÂéüÂõ†, Ê≠§ÂäüËÉΩÂ∞ÜÂú®Êé•‰∏ãÊù•ÂæàÈïø‰∏ÄÊÆµÊó∂Èó¥ÂÅúÊõ¥"
		MENU="tmoe/azureÊúçÂä°Âô®ÊØèÂë®ÈÉΩ‰ºöËá™Âä®ÊûÑÂª∫Âπ∂ÂèëÂ∏ÉÊúÄÊñ∞Áâà,Â∞ëÈÉ®ÂàÜÂèëË°åÁâà‰∏∫ÊØèÊúàÊõ¥Êñ∞"
		INSTALLDESKTOP=$(whiptail --title "Desktop environment" --menu \
			"${MENU}" 0 0 0 \
			"1" "üê≠ xfce(elegant, high compatibility)" \
			"2" "ü¶ñ kde plasma5(È£éÊ†ºÂçé‰∏ΩÁöÑÊ°åÈù¢ÁéØÂ¢É)" \
			"3" "üêü cutefish ÂèØÁà±È±º(arm64, x64, armhf)" \
			"4" "üåø mate(the continuation of GNOME 2)" \
			"5" "üê¶ lxqt(arm64, x64)" \
			"6" "üïäÔ∏è lxde(ËΩªÈáèÁ∫ß, armhf, i386)" \
			"7" "zsh(nogui)" \
			"8" "schedule Ëá™Âä®ÊûÑÂª∫ËÆ°ÂàíÊó•Á®ãË°®" \
			"0" "üåö back =Ôø£œâÔø£=" \
			3>&1 1>&2 2>&3)
	}
	# "4" "dde Ê∑±Â∫¶Ê°åÈù¢ÁéØÂ¢É(arm64, x64)" \
	# "5" "ukui ‰ºòÈ∫íÈ∫üui(arm64, x64, armhf)" \
	#"7" "Request specific version" \"7" "request ËØ∑Ê±ÇÊõ¥Êñ∞/Â¢ûÂä†ÁâàÊú¨" \
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) choose_de_zh ;;
	*) choose_de_en ;;
	esac
	case "${INSTALLDESKTOP}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		DESKTOP="xfce"
		choose_xfce_distro
		;;
	2)
		DESKTOP="kde"
		choose_kde_distro
		;;
	3)
		DESKTOP="cutefish"
		choose_cutefish_distro
		;;
	# 4)
	# 	DESKTOP="dde"
	# 	choose_dde_distro
	# 	;;
	# 5)
	# 	DESKTOP="ukui"
	# 	choose_ukui_distro
	# 	;;
	4)
		DESKTOP="mate"
		choose_mate_distro
		;;
	5)
		DESKTOP="lxqt"
		choose_lxqt_distro
		;;
	6)
		DESKTOP="lxde"
		choose_lxde_distro
		;;
	7)
		#printf "%s\n" "This feature may be available on 2020-02-17."
		DESKTOP="zsh"
		choose_zsh_distro
		;;
	8) view_the_schedule ;;
	999) request_weekly_build_version ;;
	esac
	press_enter_to_return
	install_tmoe_weekly_build_edition
}
set_debian_sid_env() {
	DISTRO_NAME='debian'
	DISTRO_CODE="sid-${DESKTOP}"
	DISTRO_NAME_02=debian-sid
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_kali_rolling_env() {
	DISTRO_NAME='kali'
	DISTRO_CODE="rolling-${DESKTOP}"
	DISTRO_NAME_02=kali-rolling
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_ubuntu_dev_env() {
	DISTRO_NAME='ubuntu'
	DISTRO_CODE="dev-${DESKTOP}"
	DISTRO_NAME_02=ubuntu-dev
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_ubuntu_dde_env() {
	DISTRO_NAME='ubuntu'
	DISTRO_CODE="${DESKTOP}"
	DISTRO_NAME_02=ubuntu
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_mint_tricia_env() {
	DISTRO_NAME='mint'
	DISTRO_CODE="tricia-${DESKTOP}"
	DISTRO_NAME_02=mint-tricia
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_mint_ulyssa_env() {
	DISTRO_NAME='mint'
	DISTRO_CODE="ulyssa-${DESKTOP}"
	DISTRO_NAME_02=mint-ulyssa
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_alpine_edge_env() {
	DISTRO_NAME='alpine'
	DISTRO_CODE="edge-${DESKTOP}"
	DISTRO_NAME_02=alpine-edge
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_fedora_rawhide_env() {
	DISTRO_NAME='fedora'
	DISTRO_CODE="rawhide-${DESKTOP}"
	DISTRO_NAME_02=fedora-rawhide
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_ubuntu_bionic_env() {
	DISTRO_NAME='ubuntu'
	DISTRO_CODE="bionic-${DESKTOP}"
	DISTRO_NAME_02=ubuntu-bionic
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
set_arch_latest_env() {
	DISTRO_NAME='arch'
	DISTRO_CODE="${DESKTOP}"
	DISTRO_NAME_02=arch
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}"
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}

set_manjaro_stable_env() {
	DISTRO_NAME='manjaro'
	DISTRO_CODE="stable-${DESKTOP}"
	DISTRO_NAME_02=manjaro-stable
	NODE01_ENABLED=false
	#TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"
	create_container_edition_txt
	create_container_edition_txt_02
	go_to_proot_management
}
desktop_does_not_support() {
	printf "%s\n" "Sorry,tmoe-linuxÂºÄÂèëËÄÖÊú™ÂØπÂΩìÂâçÊû∂ÊûÑÔºà${ARCH_TYPE}ÔºâÈÖçÁΩÆ${DESKTOP}ÁöÑËá™Âä®ÊûÑÂª∫‰ªªÂä°„ÄÇ"
}
choose_mate_distro() {
	MENU="Which distribution do you want to install?"
	OPT_0="üåö Return to previous menu"
	OPT_1="üåâ Arch-latest(arm64, x64)"
	OPT_2="üç• Debian-sid(arm64, x64)"
	OPT_3="üëí Fedora-rawhide(arm64, x64, armhf)"
	OPT_4="üèîÔ∏è Alpine-edge(arm64, armhf, i386, x64)"
	OPT_5="ubuntu-dev(arm64, x64)"
	SELECTED_GNU_LINUX=$(whiptail --title "MATE DISTROS" --menu "${MENU}" 0 50 0 \
		"1" "$OPT_1" \
		"2" "$OPT_2" \
		"3" "$OPT_3" \
		"4" "$OPT_4" \
		"5" "$OPT_5" \
		"0" "$OPT_0" \
		3>&1 1>&2 2>&3)
	# "5" "üåø Mint-tricia(amd64)" \
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_arch_latest_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	2)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_debian_sid_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	3)
		case ${ARCH_TYPE} in
		amd64 | arm64 | armhf) set_fedora_rawhide_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	4) set_alpine_edge_env ;;
	# 5)
	# 	case ${ARCH_TYPE} in
	# 	amd64) set_mint_tricia_env ;;
	# 	*)
	# 		desktop_does_not_support
	# 		distro_does_not_support
	# 		;;
	# 	esac
	# 	;;
	5)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_ubuntu_dev_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	esac
}
choose_lxde_distro() {
	SELECTED_GNU_LINUX=$(whiptail --title "LXDE DISTROS" --menu "ÂØπ‰∫éLXDEÊ°åÈù¢,ÂºÄÂèëËÄÖ‰ªÖÈÖçÁΩÆ‰∫Üi386ÂíåarmhfÁöÑËá™Âä®ÊûÑÂª∫‰ªªÂä°" 0 50 0 \
		"1" "üç• Debian-sid(i386,armhf)" \
		"0" "üåö Return to previous menu" \
		3>&1 1>&2 2>&3)
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1)
		case ${ARCH_TYPE} in
		armhf | i386) set_debian_sid_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	esac
}
choose_lxqt_distro() {
	SELECTED_GNU_LINUX=$(whiptail --title "LXQT DISTROS" --menu "Which distribution do you want to install?" 0 50 0 \
		"1" "üçõ Ubuntu-dev(arm64,x64)" \
		"2" "üëí Fedora-rawhide(arm64,x64)" \
		"0" "üåö Return to previous menu" \
		3>&1 1>&2 2>&3)
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_ubuntu_dev_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	2)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_fedora_rawhide_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	esac
}
choose_xfce_distro() {
	SELECTED_GNU_LINUX=$(whiptail --title "XFCE DISTROS" --menu "Which distribution do you want to install?" 0 50 0 \
		"1" "üêâ Kali-rolling(arm64, armhf, x64)" \
		"2" "üåâ Arch-latest(arm64, armhf, x64)" \
		"3" "üç• Debian-sid(arm64, x64)" \
		"4" "üëí Fedora-rawhide(arm64, x64)" \
		"5" "Manjaro-stable(arm64, x64)" \
		"6" "üèîÔ∏è Alpine-edge(arm64, x64)" \
		"7" "ubuntu-dev(arm64, x64)" \
		"0" "üåö Return to previous menu" \
		3>&1 1>&2 2>&3)
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1)
		case ${ARCH_TYPE} in
		amd64 | arm64 | armhf) set_kali_rolling_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	2) set_arch_latest_env ;;
	3)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_debian_sid_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	4)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_fedora_rawhide_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	5)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_manjaro_stable_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	6)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_alpine_edge_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	7)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_ubuntu_dev_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	esac
}
choose_cutefish_distro() {
	case ${ARCH_TYPE} in
	amd64 | arm64 | armhf) set_arch_latest_env ;;
	*)
		desktop_does_not_support
		distro_does_not_support
		;;
	esac
}
choose_dde_distro() {
	case ${ARCH_TYPE} in
	amd64 | arm64) set_ubuntu_dde_env ;;
	*)
		desktop_does_not_support
		distro_does_not_support
		;;
	esac
}

choose_ukui_distro() {
	case ${ARCH_TYPE} in
	amd64 | arm64 | armhf) set_ubuntu_dev_env ;;
	*)
		desktop_does_not_support
		distro_does_not_support
		;;
	esac
}
choose_kde_distro() {
	SELECTED_GNU_LINUX=$(whiptail --title "KDE PLASMA DISTROS" --menu "Plasma 5 is built using Qt 5 and KDE Frameworks 5, predominantly plasma-framework." 0 50 0 \
		"1" "üçõ Ubuntu(arm64, x64, armhf)" \
		"2" "üåâ Arch(arm64, x64)" \
		"3" "üç• Debian sid(arm64, x64)" \
		"4" "üëí Fedora rawhide(arm64, x64)" \
		"5" "üèîÔ∏è Alpine(arm64, x64)" \
		"0" "üåö Return to previous menu" \
		3>&1 1>&2 2>&3)
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1)
		case ${ARCH_TYPE} in
		arm64 | armhf | amd64)
			# set_ubuntu_bionic_env
			set_ubuntu_dev_env
			;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	2)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_arch_latest_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	3)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_debian_sid_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	4)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_fedora_rawhide_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	5)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_alpine_edge_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	esac
}
choose_zsh_distro() {
	SELECTED_GNU_LINUX=$(whiptail --title "ZSH CONTAINERS" --menu "The following containers have built-in zsh" 0 50 0 \
		"1" "üåâ Arch(arm64,armhf,x64)" \
		"2" "ü¶õ Ubuntu devel(arm64,x64)" \
		"3" "üç• Debian sid(arm64,armhf,x64,i386)" \
		"4" "üëí Fedora rawhide(arm64,armhf,x64)" \
		"5" "üèîÔ∏è Alpine edge(arm64,armhf,x64,i386)" \
		"6" "üêâ Kali-rolling(arm64,armhf,x64)" \
		"7" "Manjaro(arm64,x64)" \
		"0" "üåö Return to previous menu" \
		3>&1 1>&2 2>&3)
	case "${SELECTED_GNU_LINUX}" in
	0 | "") install_tmoe_weekly_build_edition ;;
	1)
		case ${ARCH_TYPE} in
		amd64 | armhf | arm64) set_arch_latest_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	2)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_ubuntu_dev_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	3)
		case ${ARCH_TYPE} in
		amd64 | arm64 | armhf | i386) set_debian_sid_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	4)
		case ${ARCH_TYPE} in
		amd64 | arm64 | armhf) set_fedora_rawhide_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	5)
		case ${ARCH_TYPE} in
		amd64 | arm64 | armhf | i386) set_alpine_edge_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	6)
		case ${ARCH_TYPE} in
		amd64 | arm64 | armhf) set_kali_rolling_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	7)
		case ${ARCH_TYPE} in
		amd64 | arm64) set_manjaro_stable_env ;;
		*)
			desktop_does_not_support
			distro_does_not_support
			;;
		esac
		;;
	esac
}
##############################
#fedora-rawhide armhf xfce+lxqt -> mate
#debian-sid armhf xfce+lxde -> lxde
#alpine xfce+mate -> mate
view_the_schedule() {
	cat <<-EOF
		${YELLOW}Some containers only support ${PURPLE}edition 2022${RESET}

		${BOLD}${PURPLE}Semiweekly builds${RESET}Ôºö

		${BOLD}${YELLOW}Monday & Friday${RESET}Ôºö
			${GREEN}rust ${CYAN}nightly ${YELLOW}[amd64, arm64, armhf, riscv64, ppc64el, s390x, mips64el] ${PURPLE}* ${BLUE}gnu${RESET}
			${GREEN}rust ${CYAN}nightly ${YELLOW}[amd64, arm64]  ${PURPLE}* ${BLUE}musl${RESET}

		${CYAN}--------------------------${RESET}
		${BOLD}${PURPLE}Weekly builds${RESET}Ôºö

		${BOLD}${YELLOW}Tuesday/Âë®‰∫å/ÁÅ´ÊõúÊó•${RESET}Ôºö
			${GREEN}ubuntu ${CYAN}devel ${YELLOW}amd64 ${PURPLE}* ${BLUE}[kde, xfce, mate, lxqt, zsh]${RESET}
			${GREEN}ubuntu ${CYAN}devel ${YELLOW}arm64 ${PURPLE}* ${BLUE}[kde, xfce, mate, lxqt, zsh]${RESET}
			${GREEN}ubuntu ${CYAN}devel ${YELLOW}armhf ${PURPLE}* ${BLUE}[kde, zsh]${RESET}

			${GREEN}fedora ${CYAN}rawhide ${YELLOW}amd64 ${PURPLE}* ${BLUE}[kde, xfce, mate, lxqt, zsh]${RESET}
			${GREEN}fedora ${CYAN}rawhide ${YELLOW}arm64 ${PURPLE}* ${BLUE}[kde, xfce, mate, lxqt, zsh]${RESET}
			${GREEN}fedora ${CYAN}36 ${YELLOW}armhf ${PURPLE}* ${BLUE}[mate, zsh]${RESET}

		${BOLD}${YELLOW}Wednesday/Âë®‰∏â/Ê∞¥ÊõúÊó•${RESET}Ôºö
			${GREEN}arch ${YELLOW}amd64 ${PURPLE}* ${BLUE}[kde, xfce, mate, zsh]${RESET}
			${GREEN}arch ${YELLOW}arm64 ${PURPLE}* ${BLUE}[kde, xfce, mate, zsh]${RESET}
			${GREEN}arch ${YELLOW}armhf ${PURPLE}* ${BLUE}[xfce, zsh]${RESET}

			${GREEN}debian ${CYAN}sid ${YELLOW}amd64 ${PURPLE}* ${BLUE}[kde, xfce, mate, zsh]${RESET}
			${GREEN}debian ${CYAN}sid ${YELLOW}arm64 ${PURPLE}* ${BLUE}[kde, xfce, mate, zsh]${RESET}
			${GREEN}debian ${CYAN}sid ${YELLOW}armhf ${PURPLE}* ${BLUE}[lxde, zsh]${RESET}
			${GREEN}debian ${CYAN}sid ${YELLOW}i386 ${PURPLE}* ${BLUE}[lxde, zsh]${RESET}

		${BOLD}${YELLOW}Thursday/Âë®Âõõ/Êú®ÊõúÊó•${RESET}Ôºö
			${GREEN}alpine ${CYAN}edge ${YELLOW}amd64 ${PURPLE}* ${BLUE}[kde, xfce, mate, zsh]${RESET}
			${GREEN}alpine ${CYAN}edge ${YELLOW}arm64 ${PURPLE}* ${BLUE}[kde, xfce, mate, zsh]${RESET}
			${GREEN}alpine ${CYAN}edge ${YELLOW}armhf ${PURPLE}* ${BLUE}[mate, zsh]${RESET}
			${GREEN}alpine ${CYAN}edge ${YELLOW}i386 ${PURPLE}* ${BLUE}[mate, zsh]${RESET}

			${GREEN}kali ${CYAN}rolling ${YELLOW}amd64 ${PURPLE}* ${BLUE}[xfce, zsh]${RESET}
			${GREEN}kali ${CYAN}rolling ${YELLOW}arm64 ${PURPLE}* ${BLUE}[xfce, zsh]${RESET}
			${GREEN}kali ${CYAN}rolling ${YELLOW}armhf ${PURPLE}* ${BLUE}[xfce, zsh]${RESET}

		${BOLD}${YELLOW}Friday/Âë®‰∫î/ÈáëÊõúÊó•${RESET}Ôºö
			${GREEN}manjaro ${CYAN}stable ${YELLOW}amd64 ${PURPLE}* ${BLUE}[xfce, zsh]${RESET}
			${GREEN}manjaro ${CYAN}stable ${YELLOW}arm64 ${PURPLE}* ${BLUE}[xfce, zsh]${RESET}   

		${CYAN}--------------------------${RESET}
		${BOLD}${PURPLE}Semimonthly builds${RESET}Ôºö

		${BOLD}${YELLOW}Every 2 weeks${RESET}Ôºö
			${GREEN}code ${YELLOW}[amd64, arm64, armhf] ${PURPLE}* ${BLUE}latest${RESET}   

			${GREEN}go ${YELLOW}[amd64, arm64] ${PURPLE}* ${BLUE}latest${RESET}
			${GREEN}go ${YELLOW}[amd64, arm64, armhf] ${PURPLE}* ${BLUE}alpine${RESET}

			${GREEN}jdk ${YELLOW}[amd64, arm64] ${PURPLE}* ${BLUE}latest${RESET}

			${GREEN}mongo ${YELLOW}[amd64, arm64] ${PURPLE}* ${BLUE}latest${RESET}

			${GREEN}nginx ${YELLOW}[amd64, arm64] ${PURPLE}* ${BLUE}latest${RESET}
			${GREEN}nginx ${YELLOW}[amd64, arm64, armhf] ${PURPLE}* ${BLUE}alpine${RESET}

			${GREEN}node ${YELLOW}[amd64, arm64] ${PURPLE}* ${BLUE}latest${RESET}
			${GREEN}node ${YELLOW}[amd64, arm64, armhf] ${PURPLE}* ${BLUE}alpine${RESET}

			${GREEN}php ${YELLOW}[amd64, arm64] ${PURPLE}* ${BLUE}latest${RESET}
			${GREEN}php ${YELLOW}[amd64, arm64, armhf] ${PURPLE}* ${BLUE}alpine${RESET}

			${GREEN}ruby ${YELLOW}[amd64, arm64] ${PURPLE}* ${BLUE}latest${RESET}
			${GREEN}ruby ${YELLOW}[amd64, arm64, armhf] ${PURPLE}* ${BLUE}alpine${RESET}

		${CYAN}--------------------------${RESET}
		${BOLD}${YELLOW}Todo${RESET}Ôºö
			${GREEN}PostgreSQL ${YELLOW}[amd64, arm64]
			${GREEN}Redis ${YELLOW}[amd64, arm64]
			${GREEN}Haskell ${YELLOW}amd64
			${GREEN}Swift ${YELLOW}amd64

		${CYAN}--------------------------${RESET}
	EOF

	<<-OLD
		TIMEÔºö"UTC 00:01 / CST 08:01"
		TIMEÔºö"UTC 06:01 / CST 14:01"

		${BOLD}${PURPLE}Monthly builds${RESET}Ôºö
		${BOLD}${YELLOW}8Âè∑/8th & 24Âè∑/24th of every month${RESET}Ôºö
			${GREEN}ubuntu-bionic ${YELLOW}arm64 ${PURPLE}* ${BLUE}kde${RESET}
			${GREEN}ubuntu-bionic ${YELLOW}armhf ${PURPLE}* ${BLUE}kde${RESET}
			${GREEN}linux mint-tricia ${YELLOW}amd64 ${PURPLE}* ${BLUE}mate${RESET}
	OLD

}
#Âà†Èô§ubuntu dev * kde+xfce+mate
#mint 20
install_debian_gnu_linux_distro() {
	source ${TMOE_SHARE_DIR}/container/debian/menu
}
###################
install_chroot_exclusive_containers() {
	RETURN_TO_WHERE='install_chroot_exclusive_containers'
	CLOUD_ROOTFS=false
	#\nThe developer only maintains the chroot container in the following list.
	ALPHA_SYSTEM=$(
		whiptail --title "chroot exclusive containers" --menu "ËôΩÁÑ∂ÊÇ®‰ªçÂèØ‰ª•‰ΩøÁî®prootËøêË°å‰ª•‰∏ãÂÆπÂô®,‰ΩÜÂºÄÂèëËÄÖ‰ªÖÁª¥Êä§‰∫ÜchrootÂÆπÂô®„ÄÇ" 0 55 0 \
			"1" "opensuse tumbleweed(Â∞èËú•Ëú¥È£éÊªöËçâ)" \
			"2" "deepinÊ∑±Â∫¶(arm64,x86,x64)" \
			"0" "üåö Return to previous menu ËøîÂõû‰∏äÁ∫ßËèúÂçï" \
			3>&1 1>&2 2>&3
	)
	##############################
	case "${ALPHA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		CLOUD_ROOTFS=true
		install_opensuse_linux_distro
		;;
	2) install_deepin_linux_distro ;;
	esac
	###########################
	exit 0
}
###############
install_uos_eagle() {
	case "${ARCH_TYPE}" in
	amd64 | i386 | arm64) ;;
	*) distro_does_not_support ;;
	esac
	DISTRO_CODE='eagle'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	create_container_edition_txt
	git_clone_deepin_distro
}
###########
install_deepin_apricot_amd64_and_i386() {
	case "${ARCH_TYPE}" in
	amd64 | i386) ;;
	*) distro_does_not_support ;;
	esac
	DISTRO_CODE='apricot'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	create_container_edition_txt
	git_clone_deepin_distro
}
##############
install_deepin_camel_arm64() {
	case "${ARCH_TYPE}" in
	arm64) ;;
	*) distro_does_not_support ;;
	esac
	DISTRO_CODE='camel'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	create_container_edition_txt
	git_clone_deepin_distro
}
##########
git_clone_deepin_distro() {
	[[ -e ${ROOTFS_DIR} ]] || mkdir -pv ${ROOTFS_DIR}
	cd "${ROOTFS_DIR}"
	case "${ARCH_TYPE}" in
	amd64 | i386 | arm64)
		go_to_proot_management
		DEEPIN_ROOTFS_FILE_NAME="${DISTRO_NAME}-${DISTRO_CODE}_${ARCH_TYPE}-rootfs.tar.xz"
		if [ ! -e "${DEEPIN_ROOTFS_FILE_NAME}" ]; then
			TEMP_DIR=".DEEPIN_${ARCH_TYPE}-TEMP_FOLDER"
			[[ ! -e ${TEMP_DIR} ]] || rm -rfv "${TEMP_DIR}"

			git clone \
				--depth=1 \
				"${AK2_GIT_URL}/${DISTRO_NAME}-${DISTRO_CODE}_${ARCH_TYPE}.git" \
				"${TEMP_DIR}"

			cd "${TEMP_DIR}"
			cat .container_linux_* >"${DEEPIN_ROOTFS_FILE_NAME}"
			mv -fv "${DEEPIN_ROOTFS_FILE_NAME}" ../
			cd ..
			rm -rvf "${TEMP_DIR}"
		fi
		bash -c "$(sed -n p \
			${TMOE_SHARE_DIR}/container/install |
			sed -E \
				-e "s/debian (container)/${DISTRO_NAME} \1/g" \
				-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
				-e "s:Debian (GNU/Linux):${DISTRO_NAME} \1:g")"
		;;
	*) distro_does_not_support ;;
	esac
}
###############
install_deepin_linux_distro() {
	RETURN_TO_WHERE='install_deepin_linux_distro'
	ALPHA_SYSTEM=$(
		whiptail --title "DEEPIN" --menu "deepin20Ê≠£ÂºèÁâàÈááÂèñÁªü‰∏ÄÁöÑËÆæËÆ°È£éÊ†º,‰ªéÊ°åÈù¢ÁéØÂ¢É\nÂíåÂ∫îÁî®ËøõË°åÈáçÊñ∞ËÆæËÆ°,Â∏¶Êù•ÁÑïÁÑ∂‰∏ÄÊñ∞ÁöÑËßÜËßâÊÑüÂèó" 0 50 0 \
			"1" "deepin20 apricot(x64,i386) Â§ßÂ∞è40M" \
			"2" "deepin15.5 camel(arm64) Â§ßÂ∞è78M" \
			"0" "üåö Back ËøîÂõû" \
			3>&1 1>&2 2>&3
	)
	#"999" "uos20 eagle(arm64,x64,i386) Â§ßÂ∞è38M" \
	##############################
	case "${ALPHA_SYSTEM}" in
	0 | "") install_chroot_exclusive_containers ;;
	1)
		DISTRO_NAME='deepin'
		install_deepin_apricot_amd64_and_i386
		;;
	999)
		DISTRO_NAME='uos'
		install_uos_eagle
		;;
	2)
		DISTRO_NAME='deepin'
		install_deepin_camel_arm64
		;;
	esac
	###########################
	exit 0
}
##############
install_alpha_containers() {
	CLOUD_ROOTFS=false
	RETURN_TO_WHERE='install_alpha_containers'
	TITLE="Maintenance has ceased"
	install_alpha_containers_ja() {
		MENU="Â§©Ëêå„Éû„Éç„Éº„Ç∏„É£„Éº„ÅÆÈñãÁô∫ËÄÖ„ÅØ„ÄÅÊ¨°„ÅÆ„Ç≥„É≥„ÉÜ„Éä„Éº„ÇíÁ∂≠ÊåÅ„Åó„Å™„Åè„Å™„Çä„Åæ„Åó„Åü"
		OPT_1="„É©„Ç∫„Éô„É™„Éº„Éë„Ç§ OS buster"
		OPT_2="Gentoo(arm64,armhf,x86,x64)"
		OPT_3="Devuan„ÅØDebian „Åã„ÇâÊ¥æÁîü„Åó„ÅüLinux„Éá„Ç£„Çπ„Éà„É™„Éì„É•„Éº„Ç∑„Éß„É≥„Åß„ÅÇ„Çã"
		OPT_4="Amazon(arm64, x64)"
		OPT_5="Oracle(arm64, x64)"
		OPT_6="VMware photon OS(arm64,x64,optimized for cloud-native apps)"
		OPT_7="Intel clear linux(x64)"
		OPT_8="Slackware(armhf, x64)"
		OPT_9="archcraft(x64)"
		OPT_0="üåö Êàª„Çã"
	}
	install_alpha_containers_zh() {
		MENU="ËôΩÁÑ∂ÊÇ®‰ªçÂèØ‰ª•ÂÆâË£ÖÂü∫Á°ÄÂÆπÂô®,‰ΩÜTmoe-linuxÂºÄÂèëËÄÖÂ∑≤‰∏çÂÜçÂØπ‰ª•‰∏ãÂÆπÂô®ËøõË°åÁª¥Êä§"
		OPT_1="Raspberry Pi OS Ê®πËéìÊ¥æ buster"
		OPT_2="Gentoo(arm64,armhf,x86,x64,ËøΩÊ±ÇÊûÅÈôêÈÖçÁΩÆÂíåÊûÅÈ´òËá™Áî±)"
		OPT_3="Devuan(‰∏ç‰ΩøÁî®systemd,Âü∫‰∫édebian)"
		OPT_4="Amazon(arm64,x64,‰∫öÈ©¨ÈÄä‰∫ëÊúçÂä°Âô®Á≥ªÁªü)"
		OPT_5="Oracle(arm64,x64,Áî≤È™®Êñá‰∫ëÊúçÂä°Âô®Á≥ªÁªü)"
		OPT_6="VMware photon OS(arm64,x64,‰∏∫‰∫ëÂéüÁîüÂ∫îÁî®‰ºòÂåñ)"
		OPT_7="Intel clear linux(x64,‰∏ìÊ≥®‰∫éÊúçÂä°Âô®ÁöÑÊÄßËÉΩ‰ºòÂåñ)"
		OPT_8="Slackware(armhf, x64)"
		OPT_9="archcraft(x64, ‰ΩøÁî®‰∫ÜËΩªÈáèÁ∫ßÁöÑ bspwm & openbox)"
		OPT_0="üåö ËøîÂõû‰∏äÁ∫ßËèúÂçï"
		#	"9" "SteamOS(x64,Ëí∏Ê±ΩÂπ≥Âè∞ÂºÄÂèëÂïÜValveÂèëË°åÁöÑÊ∏∏ÊàèÁ≥ªÁªü,Âü∫‰∫édebian)" \
		#"5" "Huawei euler OS(arm64,x64,Âçé‰∏∫Ê¨ßÊãâ,ÊúçÂä°Âô®Á≥ªÁªü)" \
	}
	install_alpha_containers_en() {
		MENU="The developer of Tmoe-linux no longer maintain the following containers."
		OPT_1="Raspberry Pi OS buster"
		OPT_2="Gentoo(arm64,armhf,x86,x64)"
		OPT_3="Devuan is a fork of Debian that uses sysvinit or OpenRC instead of systemd"
		OPT_4="Amazon(arm64, x64)"
		OPT_5="Oracle(arm64, x64)"
		OPT_6="VMware photon OS(arm64,x64,optimized for cloud-native apps)"
		OPT_7="Intel clear linux(x64)"
		OPT_8="Slackware(armhf, x64)"
		OPT_9="archcraft(x64, it uses lightweight bspwm & openbox)"
		OPT_0="üåö Return to previous menu"
	}

	install_alpha_containers_menu() {
		ALPHA_SYSTEM=$(
			whiptail --title "${TITLE}" --menu "${MENU}" 0 55 0 \
				"1" "${OPT_1}" \
				"2" "${OPT_2}" \
				"3" "${OPT_3}" \
				"4" "${OPT_4}" \
				"5" "${OPT_5}" \
				"6" "${OPT_6}" \
				"7" "${OPT_7}" \
				"8" "${OPT_8}" \
				"9" "${OPT_9}" \
				"0" "${OPT_0}" \
				3>&1 1>&2 2>&3
		)
	}
	#"999" "Huawei euler OS(arm64,x64)"
	#SteamOS(x64,Valve steam os,based on Debian GNU/Linux)
	#"99" "Microsoft CBL-Mariner(x64,‰∏∫azure‰ºòÂåñ,Áî®‰∫éÂæÆËΩØÁöÑ‰∫ëÂü∫Á°ÄËÆæÊñΩÂíåËæπÁºò‰∫ßÂìÅÂíåÊúçÂä°)" \
	##############################
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) install_alpha_containers_zh ;;
	ja_JP.UTF-8) install_alpha_containers_ja ;;
	*) install_alpha_containers_en ;;
	esac
	install_alpha_containers_menu
	case "${ALPHA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1) install_raspios_linux_distro ;;
	2) install_gentoo_linux_distro ;;
	3) install_devuan_linux_distro ;;
	4) install_amazon_linux_distro ;;
	5) install_oracle_linux_distro ;;
	6) install_photon_linux_distro ;;
	7) install_clear_linux_distro ;;
	8) install_slackware_linux_distro ;;
	9) install_archcraft_distro ;;
	esac
	#999) install_euler_linux_distro ;;
	###########################
	exit 0
}
#########################
install_archcraft_distro() {
	cat <<-'EOF'
		COMPLETED=true
		DISTRO_NAME="archcraft_amd64"
		ROOTFS_FILE="archcraft_amd64+bspwm-2021_10-31-rootfs.tar.zst"
		BUILD_DATE=20211031
		VERSION="latest02"
		SERVER="node03-azure"
		DEV_HOST_CPU="Intel(R) Core(TM) i5-7260U CPU @ 2.20GHz"
		SHA_256="bb1314471db489ab84dfcafebeb06d1281d649b8ffdbc0d57bd25ea4d9df3bfe"
		ZST_SIZE="1.2G"
		TAR_SIZE="4.7G"
	EOF
	do_you_want_to_continue

	DISTRO_NAME='archcraft'
	DISTRO_NAME_02="archcraft"
	DESKTOP="openbox"
	unset DISTRO_CODE
	TMOE_LINUX_CONTAINER_DISTRO='archcraft'
	ROOTFS_FILE="archcraft_amd64+bspwm-2021_10-31-rootfs.tar.zst"
	case "${ARCH_TYPE}" in
	'amd64')
		create_container_edition_txt
		create_container_edition_txt_02
		go_to_proot_management
		download_rootfs_from_node_03
		;;
	*) distro_does_not_support ;;
	esac
	# unset WEEKLY_BUILD_CONTAINER
}
install_clear_linux_distro() {
	DISTRO_NAME='clear'
	unset DISTRO_CODE
	TMOE_LINUX_CONTAINER_DISTRO='clear'
	case "${ARCH_TYPE}" in
	'amd64')
		create_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
# install_steam_linux_distro() {
# 	DISTRO_NAME='steamos'
# 	DISTRO_CODE='brewmaster'
# 	git_clone_amd64_distro_from_gitee
# }
git_clone_amd64_distro_from_gitee() {
	DISTRO_CODE_02="${DISTRO_CODE}"
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	case "${ARCH_TYPE}" in
	'amd64')
		create_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
install_puppy_linux_distro() {
	DISTRO_NAME='puppy'
	DISTRO_CODE='fossa'
	git_clone_amd64_distro_from_gitee
}
install_pop_distro() {
	DISTRO_NAME='pop'
	DISTRO_CODE='focal'
	git_clone_amd64_distro_from_gitee
}
install_solus_distro() {
	DISTRO_NAME='solus'
	DISTRO_CODE='4.2'
	git_clone_amd64_distro_from_gitee
}
install_euler_linux_distro() {
	DISTRO_NAME='euler'
	unset DISTRO_CODE
	TMOE_LINUX_CONTAINER_DISTRO='euler'
	case "${ARCH_TYPE}" in
	'amd64' | 'arm64')
		create_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
install_photon_linux_distro() {
	DISTRO_NAME='photon'
	unset DISTRO_CODE
	TMOE_LINUX_CONTAINER_DISTRO='photon'
	case "${ARCH_TYPE}" in
	'amd64' | 'arm64')
		create_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
install_amazon_linux_distro() {
	DISTRO_NAME='amazon'
	DISTRO_CODE='2'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	case "${ARCH_TYPE}" in
	'amd64' | 'arm64')
		create_container_edition_txt
		create_container_edition_txt_02
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	*) distro_does_not_support ;;
	esac
}
install_oracle_linux_distro() {
	DISTRO_NAME='oracle'
	DISTRO_CODE=8
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	case "${ARCH_TYPE}" in
	'arm64')
		create_container_edition_txt
		go_to_proot_management
		git_clone_linux_distro_rootfs_01
		;;
	amd64)
		CLOUD_ROOTFS=true
		DISTRO_CODE=$(curl -L https://mirrors.bfsu.edu.cn/lxc-images/images/oracle/ | grep date | sed -E 's@<a (href)@\n\1@g' | awk -F 'href=' '{print $2}' | cut -d '"' -f 2 | tail -n 1 | cut -d '/' -f 1)
		TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
		create_container_edition_txt
		go_to_proot_management
		linux_distro_common_model_04
		;;
	*) distro_does_not_support ;;
	esac
}
####################
git_clone_linux_distro_rootfs_01() {
	# set -x
	mkdir -pv ${ROOTFS_DIR}
	cd ${ROOTFS_DIR}
	case ${DISTRO_CODE} in
	"")
		DISTRO_NAME_03="${DISTRO_NAME}"
		GIT_REPO_NAME="${DISTRO_NAME}_${ARCH_TYPE}"
		;;
	*)
		DISTRO_NAME_03="${DISTRO_NAME}-${DISTRO_CODE}"
		GIT_REPO_NAME="${DISTRO_NAME}-${DISTRO_CODE}_${ARCH_TYPE}"
		;;
	esac
	ROOTFS_FILE_NAME="${GIT_REPO_NAME}-rootfs.tar.xz"
	echo "$ROOTFS_FILE_NAME"
	if [ ! -e "${ROOTFS_FILE_NAME}" ]; then
		TEMP_DIR=".${TMOE_LINUX_CONTAINER_DISTRO}-TEMP_FOLDER"
		[[ ! -e ${TEMP_DIR} ]] || rm -rfv "${TEMP_DIR}"
		pwd

		git clone \
			--depth=1 \
			"${AK2_GIT_URL}/${GIT_REPO_NAME}.git" \
			"${TEMP_DIR}"

		cd ${TEMP_DIR}
		cat .container_linux_* >"${ROOTFS_FILE_NAME}"
		mv -fv "${ROOTFS_FILE_NAME}" ../
		cd ..
		rm -rvf "${TEMP_DIR}"
	fi
	bash -c "$(sed -n p \
		"${TMOE_SHARE_DIR}"/container/install |
		sed -E \
			-e "s@debian (container)@${DISTRO_NAME} \1@g" \
			-e "s:debian-sid:${DISTRO_NAME_03}:g" \
			-e "s@Debian (GNU/Linux)@${DISTRO_NAME} \1@g")"
}
download_rootfs_from_node_03() {
	ROOTFS_VERSION="latest02"
	NODE_URL="${NODE03_URL}"
	NODE_NAME="node03-azure"
	DISTRO_CODE="${DESKTOP}"
	DISTRO_NAME_02="${DISTRO_NAME}"
	# NODE01_ENABLED=false
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DESKTOP}"

	bash -c "$(sed -n p \
		"${TMOE_SHARE_DIR}"/container/install |
		sed -E \
			-e "1a\WEEKLY_BUILD_CONTAINER=true" \
			-e "1a\DESKTOP=${DESKTOP}" \
			-e "1a\NODE_URL=${NODE_URL}" \
			-e "1a\NODE02_USER=${NODE02_USER}" \
			-e "1a\NODE02_PW=${NODE02_PW}" \
			-e "1a\ROOTFS_VERSION=${ROOTFS_VERSION}" \
			-e "1a\NODE_NAME=${NODE_NAME}" \
			-e "s@(TMOE_ROOTFS_TAR_XZ)=.*debian-sid_.*@\1=${ROOTFS_FILE}@" \
			-e "s/debian (container)/${DISTRO_NAME} \1/g" \
			-e "s@BFSU Open Source Mirror Station@${NODE_NAME}@" \
			-e "s:Debian (GNU/Linux):${DISTRO_NAME} \1:g")"
}
#######################
install_beta_containers() {
	CLOUD_ROOTFS=false
	install_beta_containers_zh() {
		BETA_SYSTEM=$(
			whiptail --title "Beta features" --menu "ÂÖ¨ÊµãÁâàÂÆπÂô®Â∞ÜÂ∏¶ÁªôÊÇ®Âà´Ê†∑ÁöÑÊÉäÂñú\nBeta container, endless fun." 0 55 0 \
				"1" "üèîÔ∏è Alpine(Âü∫‰∫émusl libcÂíåbusybox,Ë∂ÖÁ≤æÁÆÄÁ≥ªÁªü)" \
				"2" "CentOS(Âü∫‰∫éÁ∫¢Â∏ΩÁöÑÁ§æÂå∫‰ºÅ‰∏öÊìç‰ΩúÁ≥ªÁªü)" \
				"3" "Rocky(arm64,x64,enterprise-grade, production-ready)" \
				"4" "üê∂ Puppy(x64,Â∞èÂ∑ß‰∏îÊòìÁî®,ÈÄüÂ∫¶Âø´)" \
				"5" "Void(Âü∫‰∫éxbpsÂåÖÁÆ°ÁêÜÂô®ÁöÑÁã¨Á´ãÂèëË°åÁâà)" \
				"6" "üåø Mint(x86,x64,ÁÆÄÂçïÊòìÁî®ÁöÑÁ≥ªÁªü)" \
				"7" "Solus(x64,‰∏Ä‰∏™ÂØπÊñ∞ÊâãÂèãÂ•ΩÁöÑÂèëË°åÁâà)" \
				"8" "PopÔºÅ_OS(x64,ËÆ©Ê°åÈù¢Êõ¥ÂÖ∑Áîü‰∫ßÂäõ,ÊøÄÂèë‰∏ì‰∏ö‰∫∫ÂëòÁöÑÂàõÈÄ†Âäõ)" \
				"0" "üåö Return to previous menu ËøîÂõû‰∏äÁ∫ßËèúÂçï" \
				3>&1 1>&2 2>&3
		)
	}
	install_beta_containers_ja() {
		BETA_SYSTEM=$(
			whiptail --title "Beta features" --menu "Beta container, endless fun." 0 55 0 \
				"1" "üèîÔ∏è Alpine:„Çª„Ç≠„É•„É™„ÉÜ„Ç£„Éª„Ç∑„É≥„Éó„É´„Åï„Éª„É™„ÇΩ„Éº„ÇπÂäπÁéá„ÇíÈáçË¶ñ„Åô„Çã„Éë„ÉØ„Éº„É¶„Éº„Ç∂„ÉºÂêë„Åë„Å´Ë®≠Ë®à„Åï„Çå„Å¶„ÅÑ„Çã" \
				"2" "CentOS:RHEL„Å®Ê©üËÉΩÁöÑ„Å´‰∫íÊèõÊÄß„Åå„ÅÇ„Çã„Åì„Å®„ÇíÁõÆÊåá„Åó„Åü„Éï„É™„Éº„ÅÆLinux„Éá„Ç£„Çπ„Éà„É™„Éì„É•„Éº„Ç∑„Éß„É≥„Åß„ÅÇ„Çã" \
				"3" "Rocky(arm64,x64, enterprise-grade, production-ready)" \
				"4" "üê∂ Puppy(x64,extremely low minimum system requirements)" \
				"5" "Void:„Çº„É≠„Åã„ÇâË®≠Ë®à„Åä„Çà„Å≥ÂÆüË£Ö„Åï„Çå„ÅüX Binary Package System" \
				"6" "üåø Mint(x86,x64,Ê¥óÁ∑¥„Åï„Çå„ÄÅÊúÄÊñ∞„ÅßÂø´ÈÅ©„Å™Linux„Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„ÇíÊèê‰æõ„Åô„Çã„Åì„Å®)" \
				"7" "Solus(x64,‰ª•Ââç„ÅØEvolve OS„Å®„Åó„Å¶Áü•„Çâ„Çå„Å¶„ÅÑ„Åü)" \
				"8" "PopÔºÅ_OS(x64Ôºåbased upon Ubuntu)" \
				"0" "üåö Êàª„Çã" \
				3>&1 1>&2 2>&3
		)
	}
	install_beta_containers_en() {
		BETA_SYSTEM=$(
			whiptail --title "Beta features" --menu "Beta container, endless fun." 0 55 0 \
				"1" "üèîÔ∏è Alpine:Small. Simple. Secure. Alpine Linux is a security-oriented, lightweight Linux distribution based on musl libc and busybox" \
				"2" "CentOS is a community-driven free software effort focused on delivering a robust open source ecosystem around a Linux platform" \
				"3" "Rocky(arm64,x64, enterprise-grade, production-ready)" \
				"4" "üê∂ Puppy(x64,extremely low minimum system requirements)" \
				"5" "Void is a general purpose operating system, based on the monolithic Linux kernel" \
				"6" "üåø Mint(x86,x64,elegant, easy to use, up to date and comfortable GNU/Linux desktop distribution)" \
				"7" "Solus(x64,designed for home computing)" \
				"8" "PopÔºÅ_OS(x64,for STEM and creative professionals who use their computer as a tool to discover and create)" \
				"0" "üåö Return to previous menu" \
				3>&1 1>&2 2>&3
		)
	}
	##############################
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) install_beta_containers_zh ;;
	ja_JP.UTF-8) install_beta_containers_ja ;;
	*) install_beta_containers_en ;;
	esac

	case "${BETA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		TMOE_LINUX_CONTAINER_DISTRO='alpine'
		install_alpine_linux_distro
		;;
	2)
		CLOUD_ROOTFS=true
		install_centos_linux_distro
		;;
	3)
		CLOUD_ROOTFS=true
		install_rocky_linux_distro
		;;
	4) install_puppy_linux_distro ;;
	5)
		TMOE_LINUX_CONTAINER_DISTRO='void'
		create_container_edition_txt
		install_void_linux_distro
		;;
	6) install_mint_linux_distro ;;
	7) install_solus_distro ;;
	8) install_pop_distro ;;
	esac
	######################
	exit 0
}
#####################
install_ubuntu_gnu_linux_distro() {
	DISTRO_NAME='ubuntu'
	DISTRO_CODE='focal'
	DEB_BOOT_STRAP=false
	RETURN_TO_WHERE='install_ubuntu_gnu_linux_distro'
	COMPATIBILITY_MODE=false
	TITLE="Which version do you want to install?"
	install_ubuntu_gnu_linux_distro_zh() {
		MENU="2022Ëá≥2027Âπ¥ÁöÑÈïøÊúüÊîØÊåÅÁâà‰∏∫jammy 22.04(2022Âπ¥4ÊúàÊ≠£ÂºèÂèëÂ∏É)\nËÆæx=ÂΩìÂâçÂπ¥‰ªΩ,Ëã•x>=2023,ÂàôËØ∑ÊâãÂä®ËæìÂÖ•ÁâàÊú¨‰ª£Âè∑"
		OPT_1="22.04(LTS) ÊûúÈÖ±Ê∞¥ÊØç Jammy Jellyfish"
		OPT_2="üêí 21.10 È†ëÁöÆÂ§ßÁãêÁå¥ Impish Indri"
		# OPT_3="ü¶õ 21.04 Â§öÊØõÊ≤≥È¶¨ Hirsute Hippo"
		OPT_3="üê± 20.04(LTS)ÁÑ¶ÈªûÈ¶¨Â≥∂Èï∑Â∞æÁã∏Ë≤ì Focal Fossa"
		OPT_4="18.04(LTS)‰ªøÁîüÊµ∑Áã∏ Bionic Beaver"
		OPT_5="Compatibility mode ÂÖºÂÆπÊ®°Âºè(‰ªÖÂÆâË£Ö)"
		OPT_6="Custom codeÊâãÂä®ËæìÂÖ•ÁâàÊú¨‰ª£Âè∑"
		OPT_7="‰ΩøÁî®debootstrapÊâãÂä®ÊûÑÂª∫"
		OPT_8="Latest(Ëá™ÂãïÊ™¢Ê∏¨22.10)"
		OPT_0="üåö Return to previous menu ËøîÂõû‰∏äÁ∫ßËèúÂçï"

	}
	#	"8" "üêøÔ∏è 16.04(LTS)Xenial Xerus Â•ΩÂÆ¢ÁöÑÈùûÊ¥≤Âú∞ÊùæÈº†" \
	install_ubuntu_gnu_linux_distro_ja() {
		MENU="x =ÁèæÂú®„ÅÆÂπ¥„Å®„Åó„Åæ„Åô„ÄÅx> = 2023„ÅÆÂ†¥Âêà„ÅØ„ÄÅ„Ç≥„Éº„Éâ„Çí„Ç´„Çπ„Çø„Éû„Ç§„Ç∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
		OPT_1="22.04(LTS) Jammy Jellyfish"
		OPT_2="üêí 21.10 Impish Indri"
		# OPT_3="ü¶õ 21.04 Hirsute Hippo"
		OPT_3="üê± 20.04(LTS)Focal FossaÊ≥®ÁõÆ„ÇíÈõÜ„ÇÅ„Çã„Éï„Ç©„ÉÉ„Çµ"
		OPT_4="18.04(LTS)Bionic Beaver"
		OPT_5="‰∫íÊèõ„É¢„Éº„Éâ"
		OPT_6="„Ç´„Çπ„Çø„É†„Ç≥„Éº„Éâ"
		OPT_7="debootstrap„Çí‰ΩøÁî®„Åó„Å¶ÊâãÂãï„Åß„Éì„É´„Éâ„Åô„Çã"
		OPT_8="Latest(ÊúÄÊñ∞„Éê„Éº„Ç∏„Éß„É≥„ÇíËá™ÂãïÁöÑ„Å´Ê§úÂá∫)"
		OPT_0="üåö Êàª„Çã"
	}
	install_ubuntu_gnu_linux_distro_en() {
		MENU="The long-term support version between 2022 and 2027 is jammy(22.04).\nLet x = current year, if x>=2023,then customize the version code"
		OPT_1="22.04(LTS) Jammy Jellyfish"
		OPT_2="üêí 21.10 Impish Indri"
		# OPT_3="ü¶õ 21.04 Hirsute Hippo"
		OPT_3="üê± 20.04(LTS)Focal Fossa"
		OPT_4="18.04(LTS)Bionic Beaver"
		OPT_5="Compatibility mode"
		OPT_6="Custom code"
		OPT_7="Manually build"
		OPT_8="Latest"
		OPT_0="üåö Return to previous menu"
	}
	install_ubuntu_gnu_linux_distro_menu() {
		BETA_SYSTEM=$(
			whiptail \
				--title "${TITLE}" \
				--menu "${MENU}" 0 50 0 \
				"1" "${OPT_1}" \
				"2" "${OPT_2}" \
				"3" "${OPT_3}" \
				"4" "${OPT_4}" \
				"5" "${OPT_5}" \
				"6" "${OPT_6}" \
				"7" "${OPT_7}" \
				"8" "${OPT_8}" \
				"0" "${OPT_0}" \
				3>&1 1>&2 2>&3
		)
		# "9" "${OPT_9}" \
	}
	#ü¶¶
	case ${TMOE_MENU_LANG} in
	zh_*UTF-8) install_ubuntu_gnu_linux_distro_zh ;;
	ja_JP.UTF-8) install_ubuntu_gnu_linux_distro_ja ;;
	*) install_ubuntu_gnu_linux_distro_en ;;
	esac
	install_ubuntu_gnu_linux_distro_menu
	##############################
	case "${BETA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1) DISTRO_CODE='jammy' ;;
	2) DISTRO_CODE='impish' ;;
	# 3) DISTRO_CODE='hirsute' ;;
	3) DISTRO_CODE='focal' ;;
	4) DISTRO_CODE='bionic' ;;
	5)
		COMPATIBILITY_MODE=true
		custom_ubuntu_version
		;;
	6) custom_ubuntu_version ;;
	7) debootstrap_ubuntu_distro ;;
	8) check_the_latest_ubuntu_version ;;
	esac
	######################
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	create_container_edition_txt
	go_to_proot_management
	####################
	exit 0
}
#########################
check_ubuntu_distro_code() {
	case ${DISTRO_CODE} in
	bionic | xenial | eoan) ;;
	*)
		case "${ARCH_TYPE}" in
		"i386")
			printf "%s\n" "Â∑≤‰∏çÂÜçÊèê‰æõ${DISTRO_CODE}ÁöÑi386ÈïúÂÉè,Â∞Ü‰∏∫ÊÇ®ÈôçÁ∫ßÂà∞18.04-bionic"
			DISTRO_CODE='bionic'
			;;
		esac
		;;
	esac
	printf "%s\n" "Âç≥Â∞Ü‰∏∫ÊÇ®ÂÆâË£ÖUbuntu ${DISTRO_CODE} GNU/Linux container"
	do_you_want_to_continue
	install_different_ubuntu_gnu_linux_distros
}
##############
custom_ubuntu_version() {
	#12 50
	TARGET=$(whiptail --inputbox "ËØ∑ËæìÂÖ•ubuntuÁâàÊú¨‰ª£Âè∑Ôºå‰æãÂ¶Çfocal(Ëã±ÊñáÂ∞èÂÜô)\nPlease type the ubuntu version code." 9 50 --title "UBUNTU CODE" 3>&1 1>&2 2>&3)
	#[[ "$?" = 0 ]] || ${RETURN_TO_WHERE} #Ê≠§Ëôï‰∏çË¶ÅÂà§Êñ∑ÈÄÄÂá∫ÁãÄÊÖã
	DISTRO_CODE="$(printf '%s\n' "${TARGET}" | head -n 1 | cut -d ' ' -f 1)"
	if [ -z "${DISTRO_CODE}" ]; then
		printf "%s\n" "Ê£ÄÊµãÂà∞ÊÇ®ÂèñÊ∂à‰∫ÜÊìç‰Ωú"
		printf "%s\n" "Â∑≤Ëá™Âä®ÂàáÊç¢‰∏∫ubuntu20.04(‰ª£Âè∑focal)"
		DISTRO_CODE='focal'
	fi
}
#################
debootstrap_ubuntu_distro() {
	case ${TMOE_CHROOT} in
	true) ;;
	*)
		if [[ ${LINUX_DISTRO} = 'Android' ]]; then
			printf "%s\n" "Sorry,ÊöÇ‰∏çÊîØÊåÅÊÇ®ÁöÑÁ≥ªÁªü„ÄÇ"
			printf "%s\n" "ËØ∑Êç¢Áî®chrootÂÆπÂô®„ÄÇ"
			press_enter_to_return
			install_ubuntu_gnu_linux_distro
		fi
		;;
	esac
	[[ $(command -v debootstrap) ]] || ${TMOE_INSTALLATION_COMMAND} debootstrap
	custom_ubuntu_version
	printf "%s\n" "${DISTRO_CODE}"
	do_you_want_to_continue
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	#Ê≠§Â§ÑÈáçÂ§çÂàõÂª∫Âπ∂ÈùûÂ§ö‰Ωô
	create_container_edition_txt
	if [ ! -e "${DEBIAN_CHROOT}" ]; then
		DEB_BOOT_STRAP=true
		printf "%s\n" "${DEBIAN_CHROOT}"
		link_debootstrap_script
		if (whiptail --title "UBUNTU URL" --yes-button "BFSU MIRROR" --no-button "UBUNTU OFFICIAL" --yesno "Which url do you want to choose?" 8 50); then
			case ${ARCH_TYPE} in
			amd64 | i386) UBUNTU_MIRROR_URL="http://mirrors.bfsu.edu.cn/ubuntu" ;;
			*) UBUNTU_MIRROR_URL="http://mirrors.bfsu.edu.cn/ubuntu-ports" ;;
			esac
		else
			case ${ARCH_TYPE} in
			amd64 | i386) UBUNTU_MIRROR_URL="http://archive.ubuntu.com/ubuntu" ;;
			*) UBUNTU_MIRROR_URL="http://ports.ubuntu.com/ubuntu-ports" ;;
			esac
		fi
		${TMOE_PREFIX} mkdir -pv "${DEBIAN_CHROOT}"
		#--include=apt-utils,curl,ca-certificates,locales,locales-all,whiptail,apt-transport-https
		${TMOE_PREFIX} debootstrap \
			--no-check-gpg \
			--arch "${ARCH_TYPE}" \
			--components=main,restricted,universe,multiverse \
			--variant=minbase \
			--include=init,locales,ca-certificates,openssl \
			${DISTRO_CODE} \
			"${DEBIAN_CHROOT}" \
			${UBUNTU_MIRROR_URL}

		if [[ ${DEBIAN_CHROOT} != / && -n ${DEBIAN_CHROOT} ]]; then
			${TMOE_PREFIX} rm \
				-fv \
				"${DEBIAN_CHROOT}"/dev/*
		fi
		printf "%s\n" \
			"DEBOOTSTRAP_DIR=${DEBIAN_CHROOT}" \
			>"${CONFIG_FOLDER}"/debootstrap_dir.txt
	fi
	#debootstrap --no-check-gpg --arch arm64 --include=gawk,libblkid1,libbz2-1.0,libc6,libcom-err2,libcrypt1,libdebconfclient0,libext2fs2,libgcc-s1,libgmp10,liblzma5,libnss-nis,libnss-nisplus,libpam-modules-bin,libpam0g,libpcre3,libselinux1,libss2,libtinfo6,libuuid1,tar,zlib1g --variant=minbase sid ./sid ${UBUNTU_MIRROR_URL}
	#
}
#############
ubuntu_distro_x64_model() {
	bash -c "$(sed -n p \
		${TMOE_SHARE_DIR}/container/install |
		sed -E \
			-e "s/focal/${DISTRO_CODE}/g" \
			-e 's@(ARCH_TYPE)\}/default@\1\}/cloud@' \
			-e "s/debian (container)/${DISTRO_NAME} \1/g" \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" \
			-e "s:/${DISTRO_NAME}-ports:/${DISTRO_NAME}:g" \
			-e "s:Debian (GNU/Linux):${DISTRO_NAME} \1:g")"
}
############
ubuntu_distro_arm_model() {
	bash -c "$(sed -n p \
		${TMOE_SHARE_DIR}/container/install |
		sed -E \
			-e "s/focal/${DISTRO_CODE}/g" \
			-e 's@(ARCH_TYPE)\}/default@\1\}/cloud@' \
			-e "s/debian (container)/${DISTRO_NAME} \1/g" \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" \
			-e "s:Debian (GNU/Linux):${DISTRO_NAME} \1:g")"
}
########
ubuntu_distro_x64_model_02() {
	bash -c "$(sed -n p \
		${TMOE_SHARE_DIR}/container/install |
		sed -E \
			-e "s/focal/${DISTRO_CODE}/g" \
			-e 's@(ARCH_TYPE)\}/default@\1\}/cloud@' \
			-e "s/debian (container)/${DISTRO_NAME} \1/g" \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" \
			-e "s:/${DISTRO_NAME}-ports:/${DISTRO_NAME}:g" \
			-e "/usermod -a/d" \
			-e "/groupadd aid/d" \
			-e "s:Debian (GNU/Linux):${DISTRO_NAME} \1:g")"
}
############
ubuntu_distro_arm_model_02() {
	bash -c "$(sed -n p \
		${TMOE_SHARE_DIR}/container/install |
		sed -E \
			-e "s/focal/${DISTRO_CODE}/g" \
			-e 's@ARCH_TYPE\}/default@ARCH_TYPE\}/cloud@' \
			-e "s/debian container/${DISTRO_NAME} container/g" \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" \
			-e "s:Debian (GNU/Linux):${DISTRO_NAME} \1:g")"
}
########
linux_distro_common_model_01() {
	bash -c "$(sed -n p \
		${TMOE_SHARE_DIR}/container/install |
		sed -E \
			-e "s/debian container/${DISTRO_NAME} container/g" \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" \
			-e "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
	# -e "/usermod -a/d" \
	# -e "/groupadd aid/d" \
}
####################
#02‰∏∫kali-rolling
linux_distro_common_model_02() {
	bash -c "$(sed -n p \
		${TMOE_SHARE_DIR}/container/install |
		sed -E \
			-e "s/debian container/${DISTRO_NAME} container/g" \
			-e 's@ARCH_TYPE\}/default@ARCH_TYPE\}/cloud@' \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE_02}:g" \
			-e "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
#########################
#03‰∏∫arch linux
#############
#04‰∏∫fedoraÂíåcentos
linux_distro_common_model_04() {
	bash -c "$(sed -n p \
		${TMOE_SHARE_DIR}/container/install |
		sed -E \
			-e "s/debian container/${DISTRO_NAME} container/g" \
			-e 's@ARCH_TYPE\}/default@ARCH_TYPE\}/cloud@' \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" \
			-e "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}

####################
install_different_ubuntu_gnu_linux_distros() {
	case ${COMPATIBILITY_MODE} in
	true)
		case "${ARCH_TYPE}" in
		amd64 | i386) ubuntu_distro_x64_model_02 ;;
		*) ubuntu_distro_arm_model_02 ;;
		esac
		;;
	*)
		case "${ARCH_TYPE}" in
		amd64 | i386) ubuntu_distro_x64_model ;;
		*) ubuntu_distro_arm_model ;;
		esac
		;;
	esac
	#UBUNTU ppc64el/s390x/armÊû∂ÊûÑÈúÄ‰ΩøÁî®portsÊ∫ê
}
############
do_you_want_to_install_ubuntu_older_version() {
	if [ -z ${DISTRO_CODE} ]; then
		printf "%s\n" "${YELLOW}Sorry${RESET}, tmoe cannot install ubuntu ${PURPLE}${VERSION}${RESET} now"
		printf "%s\n" "Do you want to install ubuntu ${GREEN}22.04(jammy)?${RESET}"
		DISTRO_CODE='jammy'
		do_you_want_to_continue
	fi
}
check_the_latest_ubuntu_version() {
	LXC_IMAGES_REPO="https://mirrors.bfsu.edu.cn/lxc-images/images/${DISTRO_NAME}/"
	DISTRO_CODE=$(curl -L ${LXC_IMAGES_REPO} | grep date | cut -d '=' -f 4 | cut -d '"' -f 2 | grep -Ev 'size|bionic|cosmic|disco|eoan|focal|trusty|xenial|groovy|hirsute|impish|jammy' | tail -n 1)
	VERSION="next version"
	do_you_want_to_install_ubuntu_older_version
}
##########
install_kali_rolling_gnu_linux_distro() {
	DISTRO_NAME='kali'
	DISTRO_CODE='rolling'
	DISTRO_CODE_02='current'
	linux_distro_common_model_02
}
#####################
install_arch_linux_distro() {
	DISTRO_NAME='archlinux'
	DISTRO_CODE='latest'
	DISTRO_CODE_02='current'
	case ${ARCH_TYPE} in
	amd64 | arm64 | armhf)
		linux_distro_common_model_03
		# armhf)
		# bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		# 	sed 's@${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@https://mirrors.bfsu.edu.cn/archlinuxarm/os/ArchLinuxARM-armv7-latest.tar.gz@g' |
		# 	sed "s/debian container/${DISTRO_NAME} container/g" |
		# 	sed "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" |
		# 	sed 's:rootfs.tar.xz:rootfs.tar.gz:g' |
		# 	sed "s:Debian GNU/Linux:${DISTRO_NAME}:g")"
		# ;;
		;;
	*) distro_does_not_support ;;
	esac
}
############
check_the_latest_distro_version() {
	LXC_IMAGES_REPO="https://mirrors.tuna.tsinghua.edu.cn/lxc-images/images/${DISTRO_NAME}/"
	DISTRO_CODE=$(curl -sL ${LXC_IMAGES_REPO} | grep date | tail -n 1 | cut -d '=' -f 4 | cut -d '"' -f 2)
	which_version_do_you_want_to_install
}
#################
case_cloud_rootfs_01_04() {
	case ${CLOUD_ROOTFS} in
	true) linux_distro_common_model_04 ;;
	*) linux_distro_common_model_01 ;;
	esac
}
###########
before_going_to_proot_menu() {
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	create_container_edition_txt
	go_to_proot_management
}
which_version_do_you_want_to_install() {
	if (whiptail --title "${DISTRO_NAME} VERSION" --yes-button "${DISTRO_CODE}" --no-button "${OLD_STABLE_VERSION}" --yesno "ÊÇ®ÊÉ≥Ë¶ÅÂÆâË£ÖÂì™‰∏™ÁâàÊú¨ÔºüWhich version do you want to install?Ê£ÄÊµãÂà∞ÂΩìÂâçÁöÑÊúÄÊñ∞ÁâàÊú¨(latest version)‰∏∫${DISTRO_CODE}" 9 50); then
		before_going_to_proot_menu
		case_cloud_rootfs_01_04
	else
		DISTRO_CODE="${OLD_STABLE_VERSION}"
		before_going_to_proot_menu
		case_cloud_rootfs_01_04
	fi
}
######################
fedora_distro_menu() {
	RETURN_TO_WHERE='fedora_distro_menu'
	BETA_SYSTEM=$(
		whiptail --title "Fedora" --menu "ÊÇ®ÊÉ≥Ë¶ÅÂÆâË£ÖÂì™‰∏™FedoraÁâàÊú¨Ôºü\nWhich version do you want to install?" 0 0 0 \
			"1" "latest" \
			"2" "33" \
			"3" "rawhide(For testing only)" \
			"0" "üåö Return to previous menu ËøîÂõû‰∏äÁ∫ßËèúÂçï" \
			3>&1 1>&2 2>&3
		#			"2" "34" \
	)
	##############################
	case "${BETA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		OLD_STABLE_VERSION=$(curl -L https://mirrors.bfsu.edu.cn/lxc-images/images/fedora/ | grep date | tail -n 2 | head -n 1 | cut -d '=' -f 4 | cut -d '"' -f 2)
		check_the_latest_distro_version
		;;
		#2)
		#	DISTRO_CODE=34
		#case ${ARCH_TYPE} in
		#amd64) CORRENT_SHA256SUM='4f8471bb8402d8b903fbe0a4944df5f935a6b32b0a3032e645ac6881a60ef4dc' ;;
		#arm64) CORRENT_SHA256SUM='504be6ae28e26f3d94166e480fc8b59f1c7e469df0d7de510056c951f9ce50d5' ;;
		#esac
		#	git_clone_fedora_rootfs
	#	;;
	2)
		DISTRO_CODE=33
		before_going_to_proot_menu
		case_cloud_rootfs_01_04
		# linux_distro_common_model_04
		;;
	3)
		DISTRO_CODE=35
		git_clone_fedora_rootfs
		;;
	esac
	######################
	press_enter_to_return
	tmoe_manager_main_menu
}
#########################
git_clone_fedora_rootfs() {
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	create_container_edition_txt
	go_to_proot_management
	[[ -e ${ROOTFS_DIR} ]] || mkdir -pv ${ROOTFS_DIR}
	cd ${ROOTFS_DIR}
	FEDORA_ROOTFS_FILE="fedora-${DISTRO_CODE}_${ARCH_TYPE}-rootfs.tar.xz"
	FEDORA_TEMP_FOLDER=".${FEDORA_ROOTFS_FILE}_TEMP_FOLDER"
	if [[ ! -s "${FEDORA_ROOTFS_FILE}" ]]; then
		rm -rvf \
			"${FEDORA_TEMP_FOLDER}" \
			2>/dev/null

		git clone \
			--depth=1 \
			"${AK2_GIT_URL}/fedora-${DISTRO_CODE}_${ARCH_TYPE}" \
			"${FEDORA_TEMP_FOLDER}"

		mv -f \
			"${FEDORA_TEMP_FOLDER}/fedora-${DISTRO_CODE}_${ARCH_TYPE}.tar.xz" \
			"${ROOTFS_DIR}/${FEDORA_ROOTFS_FILE}"

		rm -rvf ${FEDORA_TEMP_FOLDER}
	fi

	case ${DISTRO_CODE} in
	33)
		bash -c "$(sed -n p \
			${TMOE_SHARE_DIR}/container/install |
			sed -E \
				-e "s/debian (container)/${DISTRO_NAME} \1/g" \
				-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
				-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" \
				-e "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
		;;
	*)
		bash -c "$(sed -n p \
			${TMOE_SHARE_DIR}/container/install |
			sed -E \
				-e "s/debian (container)/${DISTRO_NAME} \1/g" \
				-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
				-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE}:g" \
				-e "s@(FEDORA_VERSION)=.*@\1=29@g" \
				-e "s:Debian (GNU/Linux):${DISTRO_NAME} \1:g")"
		#ÂΩìÁâàÊú¨‰Ωé‰∫é30ÔºåÊàñ‰∏∫rawhideÊó∂‰∏ç‰ºöËá™Âä®Êç¢Ê∫ê
		;;
	esac
}
###################
install_fedora_gnu_linux_distro() {
	DISTRO_NAME='fedora'
	TMOE_LINUX_CONTAINER_DISTRO='fedora'
	CLOUD_ROOTFS=true
	case "${ARCH_TYPE}" in
	armel | i386) distro_does_not_support ;;
	armhf)
		DISTRO_CODE=33
		TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
		create_container_edition_txt
		go_to_proot_management
		[[ -e ${ROOTFS_DIR} ]] || mkdir -pv "${ROOTFS_DIR}"
		cd "${ROOTFS_DIR}"
		FEDORA_ROOTFS_FILE='fedora-33_armhf-rootfs.tar.xz'
		FEDORA_TEMP_FOLDER=".${FEDORA_ROOTFS_FILE}_TEMP_FOLDER"
		if [[ ! -s "${FEDORA_ROOTFS_FILE}" ]]; then
			rm -rvf ${FEDORA_TEMP_FOLDER} 2>/dev/null

			git clone \
				--depth=1 \
				"${AK2_GIT_URL}/fedora-33_armhf" \
				"${FEDORA_TEMP_FOLDER}"

			mv -f \
				"${FEDORA_TEMP_FOLDER}/${FEDORA_ROOTFS_FILE}" \
				"${ROOTFS_DIR}"

			rm -rvf ${FEDORA_TEMP_FOLDER}
		fi
		: <<\EOF
		#CORRENT_SHA256SUM='bec3047102e6edbb834735233713f45ef085f9b8e46f493f39732f53891d3a0e'
		printf "%s\n" 'Verifying sha256hash...'
		printf "%s\n" 'Ê≠£Âú®Ê†°È™åsha256ÂìàÂ∏åÂÄº...'
		printf "%s\n" "${CORRENT_SHA256SUM}"
		LOCAL_SHA256SUM=$(sha256sum ${FEDORA_ROOTFS_FILE} | cut -c 1-64)
		case ${LOCAL_SHA256SUM} in
		"${CORRENT_SHA256SUM}") printf "%s\n" "CongratulationsÔºÅÊ£ÄÊµãÂà∞sha256ÂìàÂ∏åÂÄº‰∏éÊ∫êÊñá‰ª∂‰∏ÄËá¥„ÄÇ" ;;
		esac
EOF
		linux_distro_common_model_01
		;;
	*)
		#OLD_STABLE_VERSION='31'
		fedora_distro_menu
		;;
	esac
}
#######################
linux_distro_common_model_03() {
	bash -c "$(sed -n p \
		${TMOE_SHARE_DIR}/container/install |
		sed -E \
			-e "s/debian (container)/${DISTRO_NAME} \1/g" \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE_02}:g" \
			-e "s:Debian GNU/Linux:${DISTRO_NAME}:g")"
}
#################
install_void_linux_distro() {
	DISTRO_NAME='void'
	TMOE_LINUX_CONTAINER_DISTRO='void'
	create_container_edition_txt
	go_to_proot_management
	DISTRO_NAME='voidlinux'
	DISTRO_CODE='default'
	DISTRO_CODE_02='current'
	linux_distro_common_model_03
}
##########################
custom_rocky_version() {
	TARGET=$(whiptail --inputbox "ËØ∑ËæìÂÖ•rockyÁâàÊú¨‰ª£Âè∑Ôºå‰æãÂ¶Ç8\nPlease type the rocky version code." 9 50 --title "ROCKY CODE" 3>&1 1>&2 2>&3)
	DISTRO_CODE="$(printf '%s\n' "${TARGET}" | head -n 1 | cut -d ' ' -f 1)"
	if [ -z "${DISTRO_CODE}" ]; then
		printf "%s\n" "Ê£ÄÊµãÂà∞ÊÇ®ÂèñÊ∂à‰∫ÜÊìç‰Ωú"
		printf "%s\n" "Â∑≤Ëá™Âä®ÂàáÊç¢‰∏∫${PURPLE}8${RESET}"
		DISTRO_CODE='8'
	fi
}
install_rocky_linux_distro() {
	DISTRO_NAME='rocky'
	TMOE_LINUX_CONTAINER_DISTRO='rocky'
	create_container_edition_txt
	go_to_proot_management
	DISTRO_NAME='rocky'
	case "${ARCH_TYPE}" in
	arm64 | amd64)
		OLD_STABLE_VERSION='8'
		DISTRO_NAME='rockylinux'
		if (whiptail --title "ROCKY VERSION" --yes-button "${OLD_STABLE_VERSION}" --no-button "customize" --yesno "Which version do you want to install?" 9 50); then
			DISTRO_CODE="${OLD_STABLE_VERSION}"
		else
			custom_rocky_version
		fi
		linux_distro_common_model_04
		;;
	"armhf" | "i386" | *) distro_does_not_support ;;
	esac
}
install_centos_linux_distro() {
	DISTRO_NAME='centos'
	case "${ARCH_TYPE}" in
	"armhf" | "i386")
		printf "%s\n" "Ê£ÄÊµãÂà∞CentOS 9‰∏çÊîØÊåÅÊÇ®ÂΩìÂâçÁöÑÊû∂ÊûÑÔºåÂ∞Ü‰∏∫ÊÇ®ÈôçÁ∫ßËá≥CentOS 7"
		DISTRO_CODE='7'
		TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
		create_container_edition_txt
		go_to_proot_management
		linux_distro_common_model_04
		;;
	*)
		OLD_STABLE_VERSION='8-Stream'
		check_the_latest_distro_version
		#DISTRO_CODE='8'
		#linux_distro_common_model_01
		;;
	esac
}
######################
install_gentoo_linux_distro() {
	DISTRO_NAME='gentoo'
	TMOE_LINUX_CONTAINER_DISTRO='gentoo'

	if (whiptail --title "init" --yes-button "openrc" --no-button "systemd" --yesno "gentoo" 7 40); then
		DISTRO_CODE='openrc'
	else
		DISTRO_CODE='systemd'
	fi

	# case "${ARCH_TYPE}" in
	# 'arm64')
	# 	create_container_edition_txt
	# 	go_to_proot_management
	# 	DISTRO_CODE='current'
	# 	#sed '45 a\ARCH_TYPE="armhf"' |
	# 	TUNA_LXC_IMAGE_MIRROR_REPO="https://mirrors.bfsu.edu.cn/gentoo/releases/arm64/autobuilds/current-stage3-arm64"
	# 	TTIME=$(curl -L "${TUNA_LXC_IMAGE_MIRROR_REPO}/" | grep date | sed -E 's@<a (href)@\n\1@g' | awk -F 'href=' '{print $2}' | cut -d '"' -f 2 | grep -Ev 'systemd|DIGESTS|CONTENTS.gz' | grep 'tar' | tail -n 1)
	# 	bash -c "$(sed -n p \
	# 		${TMOE_SHARE_DIR}/container/install |
	# 		sed -E \
	# 			-e "s@\${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@${TUNA_LXC_IMAGE_MIRROR_REPO}/${TTIME}@g" \
	# 			-e 's/debian (container)/Gentoo \1/g' \
	# 			-e 's:debian-sid:gentoo-current:g' \
	# 			-e 's:debian/sid:gentoo/current:g' \
	# 			-e 's:Debian (GNU/Linux):Gentoo \1:g')"
	# 	;;
	# *)
	# 		;;
	# esac
	create_container_edition_txt
	go_to_proot_management
	DISTRO_CODE_02='current'

	bash -c "$(sed -n p \
		${TMOE_SHARE_DIR}/container/install |
		sed -E \
			-e "s/debian container/${DISTRO_NAME} container/g" \
			-e "s@ARCH_TYPE\}/default@ARCH_TYPE\}/${DISTRO_CODE}@" \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e "s:debian/sid:${DISTRO_NAME}/${DISTRO_CODE_02}:g" \
			-e "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
###########################
install_alpine_linux_distro() {
	DISTRO_NAME='alpine'
	#DISTRO_CODE='3.11'
	DISTRO_CODE=$(curl -L https://mirrors.bfsu.edu.cn/lxc-images/images/alpine/ | grep -Ev 'edge|3.7|3.8|3.9' | grep date | tail -n 1 | cut -d '=' -f 3 | cut -d '"' -f 2 | sed 's@/@@')
	OLD_STABLE_VERSION='edge'
	which_version_do_you_want_to_install
}
#####################
opensuse_warning() {
	case "${LINUX_DISTRO}" in
	Android)
		case ${TMOE_CHROOT} in
		true) ;;
		*)
			cat <<-EOF
				# ${RED}WARNINGÔºÅ${RESET} You are using ${BLUE}Android${RESET}, and your container is ${YELLOW}proot${RESET}.
				In this environment, opensuse may have some bugs.
			EOF
			do_you_want_to_continue
			;;
		esac
		;;
	esac
}
########
install_opensuse_linux_distro() {
	opensuse_warning
	DISTRO_NAME='opensuse'
	DISTRO_CODE='tumbleweed'
	TMOE_LINUX_CONTAINER_DISTRO='opensuse-tumbleweed'
	create_container_edition_txt
	go_to_proot_management
	linux_distro_common_model_04
}
####################
install_raspios_linux_distro() {
	DISTRO_NAME='raspios'
	DISTRO_CODE='buster'
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	case "${ARCH_TYPE}" in
	arm64)
		printf "%s\n" "Ê£ÄÊµãÂà∞ÊÇ®ÈÄâÊã©ÁöÑÊòØÊ†ëËéìÊ¥æÁ≥ªÁªü"
		printf "%s\n" "Ê£ÄÊµãÂà∞ÊÇ®‰ΩøÁî®ÁöÑÊòØ${PURPLE}arm64${RESET}Êû∂ÊûÑÔºåËØ∑ÂõûÂà∞Ë∑®Êû∂ÊûÑÔºàcross-archÔºâËèúÂçïÔºåÂπ∂ÈÄâÊã©${BLUE}armhf${RESET}"
		# printf "%s\n" "Â∑≤Â∞ÜÊÇ®ÁöÑÊû∂ÊûÑ‰∏¥Êó∂ËØÜÂà´‰∏∫armhf"
		printf "%s\n" "Â¶ÇÈúÄÂÆâË£Ö${YELLOW}arm64${RESET}ÁâàÁöÑÊ†ëËéìÊ¥æÁ≥ªÁªüÔºåÂàôËØ∑Â∞Üarm64ÁâàÁöÑRaspiOS rootfs.tar.xzÊñá‰ª∂ÈáçÂëΩÂêç‰∏∫${GREEN}raspios-buster_armhf_lite-rootfs.tar.xz${RESET},Âπ∂Â∞ÜÂÖ∂ÁßªÂä®Âà∞${BLUE}${ROOTFS_DIR}${RESET}"
		press_enter_to_continue
		;;
	esac
	case "${ARCH_TYPE}" in
	arm64 | armhf) NEW_TMOE_ARCH='armhf' ;;
	*) distro_does_not_support ;;
	esac
	case "${TRUE_ARCH_TYPE}" in
	arm64 | armhf)
		TMOE_QEMU_ARCH=""
		create_tmoe_arch_file
		;;
	esac
	ARCH_TYPE="${NEW_TMOE_ARCH}"
	create_container_edition_txt
	go_to_proot_management
	if (whiptail --title "RASPIOS" --yes-button "FULL" --no-button "LITE" --yesno "ÊÇ®ÊÉ≥Ë¶ÅÂÆâË£ÖÂì™‰∏™ÁâàÊú¨ÁöÑraspiosÔºüFullÁâàÁ∫¶1.9G,liteÁâàÁ∫¶274M" 9 50); then
		install_raspios_full_armhf_rootfs
	else
		install_raspios_lite_armhf_rootfs
	fi
}
###################
install_raspios_lite_armhf_rootfs() {
	bash -c "$(sed -n p \
		${TMOE_SHARE_DIR}/container/install |
		sed -E \
			-e 's@TUNA_LXC_IMAGE_MIRROR_REPO=.*@TUNA_LXC_IMAGE_MIRROR_REPO=https://mirrors.bfsu.edu.cn/raspberry-pi-os-images/raspios_lite_armhf/archive@' \
			-e 's@(TUNA_LXC_IMAGE_MIRROR_REPO_02=).*@\1https://mirrors.tuna.tsinghu.edu.cn/raspberry-pi-os-images/raspios_lite_armhf/archive@' \
			-e 's@${TTIME}rootfs.tar.xz@${TTIME}root.tar.xz@g' \
			-e 's@#deb http@deb http@g' \
			-e 's@-rootfs.tar.xz@_lite-rootfs.tar.xz@g' \
			-e 's/.*sid main/#&/' \
			-e 's/debian (container)/raspios \1/g' \
			-e 's:debian-sid:raspios-buster:g' \
			-e 's:Debian (GNU/Linux):Raspios \1:g')"
}
##################
install_raspios_full_armhf_rootfs() {
	bash -c "$(sed -n p \
		"${TMOE_SHARE_DIR}"/container/install |
		sed -E \
			-e 's@TUNA_LXC_IMAGE_MIRROR_REPO=.*@TUNA_LXC_IMAGE_MIRROR_REPO=https://mirrors.bfsu.edu.cn/raspberry-pi-os-images/raspios_full_armhf/archive@' \
			-e's@(TUNA_LXC_IMAGE_MIRROR_REPO_02=).*@\1https://mirrors.tuna.tsinghu.edu.cn/raspberry-pi-os-images/raspios_full_armhf/archive@' \
			-e 's@${TTIME}rootfs.tar.xz@${TTIME}root.tar.xz@g' \
			-e 's@#deb http@deb http@g' \
			-e 's@-rootfs.tar.xz@_full-rootfs.tar.xz@g' \
			-e 's/.*sid main/#&/' \
			-e 's/debian (container)/raspios \1/g' \
			-e 's:debian-sid:raspios-buster:g' \
			-e 's:Debian (GNU/Linux):Raspios \1:g')"
}
############################
install_devuan_linux_distro() {
	CLOUD_ROOTFS=true
	DISTRO_NAME='devuan'
	#DISTRO_CODE='beowulf'
	#OLD_STABLE_VERSION=$(curl -L https://mirrors.bfsu.edu.cn/lxc-images/images/devuan/ | grep date | tail -n 2 | head -n 1 | cut -d '=' -f 4 | cut -d '"' -f 2)
	OLD_STABLE_VERSION=ascii
	check_the_latest_distro_version
}
######################
install_slackware_linux_distro() {
	DISTRO_NAME='slackware'
	TMOE_LINUX_CONTAINER_DISTRO='slackware'
	create_container_edition_txt
	[[ -e ${ROOTFS_DIR} ]] || mkdir -pv "${ROOTFS_DIR}"
	cd ${ROOTFS_DIR}
	case "${ARCH_TYPE}" in
	amd64)
		go_to_proot_management
		if [ ! -e "slackware-current_amd64-rootfs.tar.xz" ]; then
			git clone -b x64 --depth=1 "${AK2_GIT_URL}"/slackware_rootfs.git .SLACKWARE_AMD64_TEMP_FOLDER
			#aria2c --console-log-level=warn --no-conf -x 16 -s 16 -k 1M -o "slackware-current-rootfs.tar.xz" "https://cdn.tmoe.me/Tmoe-Debian-Tool/chroot/archive/slackware_amd64.tar.xz" || aria2c --console-log-level=warn --no-conf -x 16 -s 16 -k 1M -o "slackware-current-rootfs.tar.xz" "https://m.tmoe.me/down/share/Tmoe-linux/chroot/slackware_amd64.tar.xz"
			cd .SLACKWARE_AMD64_TEMP_FOLDER
			mv -f slackware_amd64.tar.xz ../slackware-current_amd64-rootfs.tar.xz
			cd ..
			rm -rf .SLACKWARE_AMD64_TEMP_FOLDER
		fi
		bash -c "$(sed -n p \
			"${TMOE_SHARE_DIR}"/container/install |
			sed -E \
				-e 's/debian container/slackware container/g' \
				-e 's:debian-sid:slackware-current:g' \
				-e 's:debian/sid:slackware/current:g' \
				-e 's:Debian (GNU/Linux):Slackware \1:g')"
		;;
	arm64 | armhf)
		NEW_TMOE_ARCH='armhf'
		unset TMOE_QEMU_ARCH
		create_tmoe_arch_file
		ARCH_TYPE='armhf'
		go_to_proot_management
		#if [ ! -e "slackware-current_armhf-rootfs.tar.xz" ]; then
		printf "%s\n" "Ê£ÄÊµãÂà∞ÊÇ®ÂΩìÂâç‰ΩøÁî®ÁöÑÊòØ${ARCH_TYPE}Êû∂ÊûÑÔºåÂ∞Ü‰∏∫ÊÇ®ÂÆâË£ÖarmhfÁâàslackwareÂÆπÂô®"
		SLACKWARE_ROOTFS_TUNA_REPO='https://mirrors.bfsu.edu.cn/slackwarearm/slackwarearm-devtools/minirootfs/roots'
		LatestSlack="$(curl -L ${SLACKWARE_ROOTFS_TUNA_REPO}/ | grep 'tar.xz' | tail -n 1 | cut -d '=' -f 3 | cut -d '"' -f 2)"
		#aria2c --console-log-level=warn --no-conf -x 5 -s 5 -k 1M -o "slackware-current_armhf-rootfs.tar.xz" "${SLACKWARE_ROOTFS_TUNA_REPO}/${LatestSlack}"
		#fi
		THE_LATEST_SLACKWARE_URL="${SLACKWARE_ROOTFS_TUNA_REPO}/${LatestSlack}"
		bash -c "$(sed -n p \
			"${TMOE_SHARE_DIR}"/container/install |
			sed -E \
				-e "s@\${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@${THE_LATEST_SLACKWARE_URL}@g" \
				-e 's/debian (container)/slackware \1/g' \
				-e 's:debian-sid:slackware-current:g' \
				-e 's:debian/sid:slackware/current:g' \
				-e 's:Debian (GNU/Linux):Slackware \1:g')"
		;;
	*) distro_does_not_support ;;
	esac
}
#########################
distro_does_not_support() {
	printf "%s\n" "${PURPLE}Sorry${RESET},your architecture is ${BLUE}${ARCH_TYPE}${RESET}."
	printf "%s\n" "Please try to use ${BLUE}cross-architecture${RESET}."
	case ${TMOE_LANG} in
	zh_*UTF-8) printf "%s\n" "Ê£ÄÊµãÂà∞ÊÇ®‰ΩøÁî®ÁöÑÊòØ${BLUE}${ARCH_TYPE}${RESET}Êû∂ÊûÑ,ËØ∑Â∞ùËØï${YELLOW}Ë∑®Êû∂ÊûÑ${RESET}ËøêË°å,ÊàñÊç¢Áî®ÂÖ∂‰ªñÂèëË°åÁâà" ;;
	esac
	press_enter_to_return
	choose_which_gnu_linux_distro
}
##############
choose_ubuntu_budgie_or_cinnamon() {
	DESKTOP_NAME=$(
		whiptail --title "${DISTRO_NAME}" --menu "In addition to cli and minimal, every container has a built-in desktop environment\nÈô§cliÂíåminimalÁâàÂ§ñ,‰ª•‰∏ãÂÆπÂô®Â∑≤È¢ÑË£ÖÊ°åÈù¢,ÊØè‰∏™ÈïúÂÉèÂ§ßÂ∞è‰∏∫1~2G" 0 50 0 \
			"1" "üê≠ xfce" \
			"2" "üë£ cinnamon" \
			"3" "ü¶ú budgie" \
			"4" "cli(nogui)" \
			"5" "minimal(nogui)" \
			"0" "üåö Return to previous menu" \
			3>&1 1>&2 2>&3
	)
	case "${DESKTOP_NAME}" in
	0 | "") install_armbian_linux_distro ;;
	1) DISTRO_CODE='xfce' ;;
	2) DISTRO_CODE='cinnamon' ;;
	3) DISTRO_CODE='budgie' ;;
	4) DISTRO_CODE='cli' ;;
	5) DISTRO_CODE='minimal' ;;
	esac
}
choose_ubuntu_xfce_or_cinnamon() {
	DESKTOP_NAME=$(
		whiptail --title "${DISTRO_NAME}" --menu "In addition to cli and minimal, every container has a built-in desktop environment\nÈô§cliÂíåminimalÁâàÂ§ñ,‰ª•‰∏ãÂÆπÂô®Â∑≤È¢ÑË£ÖÊ°åÈù¢,ÊØè‰∏™ÈïúÂÉèÂ§ßÂ∞è‰∏∫1~2G" 0 50 0 \
			"1" "üê≠ xfce" \
			"2" "üë£ cinnamon" \
			"3" "cli(nogui)" \
			"4" "minimal(nogui)" \
			"0" "üåö Return to previous menu" \
			3>&1 1>&2 2>&3
	)
	case "${DESKTOP_NAME}" in
	0 | "") install_armbian_linux_distro ;;
	1) DISTRO_CODE='xfce' ;;
	2) DISTRO_CODE='cinnamon' ;;
	3) DISTRO_CODE='cli' ;;
	4) DISTRO_CODE='minimal' ;;
	esac
}
choose_debian_xfce_or_cinnamon() {
	DESKTOP_NAME=$(
		whiptail --title "${DISTRO_NAME}" --menu "In addition to cli and minimal,\nevery container has a built-in desktop environment" 0 50 0 \
			"1" "üê≠ xfce" \
			"2" "cli(nogui)" \
			"3" "minimal(nogui)" \
			"0" "üåö Return to previous menu" \
			3>&1 1>&2 2>&3
	)
	case "${DESKTOP_NAME}" in
	0 | "") install_armbian_linux_distro ;;
	1) DISTRO_CODE='xfce' ;;
	2) DISTRO_CODE='cli' ;;
	3 | *) DISTRO_CODE='minimal' ;;
	esac
}
install_armbian_linux_distro() {
	RETURN_TO_WHERE='install_armbian_linux_distro'
	DISTRO_NAME='armbian'
	BETA_SYSTEM=$(
		whiptail --title "ARMBIAN" --menu "armbianÊòØ‰∏ì‰∏∫ARMÂºÄÂèëÊùø(‰æãÂ¶Çnanopi,rock64,pine64Á≠â)ÊâìÈÄ†ÁöÑdebian/ubuntuÁ≥ªÁªü\nArmbian is a Debian & Ubuntu based computer OS for ARM development boards." 0 50 0 \
			"1" "Jammy(ubuntu 22.04)" \
			"2" "üê± Focal(ubuntu 20.04)" \
			"3" "üêé Bullseye(debian 11)" \
			"4" "üê∂ Buster(debian 10)" \
			"5" "Custom codeÊâãÂä®ËæìÂÖ•ÁâàÊú¨‰ª£Âè∑" \
			"0" "üåö Return to previous menu" \
			3>&1 1>&2 2>&3
	)
	#
	##############################
	case "${BETA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		# impish
		DISTRO_NAME='jammy'
		choose_ubuntu_xfce_or_cinnamon
		;;
	2)
		DISTRO_NAME='focal'
		choose_ubuntu_budgie_or_cinnamon
		;;
	3)
		DISTRO_NAME='bullseye'
		choose_debian_xfce_or_cinnamon
		;;
	4)
		DISTRO_NAME='buster'
		choose_debian_xfce_or_cinnamon
		;;
	5 | *)
		custom_armbian_version
		choose_debian_xfce_or_cinnamon
		;;
	esac
	######################
	case "${ARCH_TYPE}" in
	arm64 | armhf) ;;
	*) distro_does_not_support ;;
	esac
	TMOE_LINUX_CONTAINER_DISTRO="${DISTRO_NAME}-${DISTRO_CODE}"
	create_container_edition_txt
	go_to_proot_management
	printf "%s\n" "Âç≥Â∞Ü‰∏∫ÊÇ®ÂÆâË£Ö${TMOE_LINUX_CONTAINER_DISTRO} GNU/Linux container"
	do_you_want_to_continue
	install_different_armbian_gnu_linux_distros
	####################
	exit 0
}
#########################
install_different_armbian_gnu_linux_distros() {
	if [ ! $(command -v lz4) ]; then
		printf "%s\n" "${GREEN}${TMOE_INSTALLATION_COMMAND} ${BLUE}lz4${RESET}"
		printf "%s\n" "Do you want to install ${BLUE}lz4?${PURPLE}[Y/n]${RESET}"
		do_you_want_to_continue
		${TMOE_INSTALLATION_COMMAND} lz4
		# apt update 2>/dev/null
		# apt install -y lz4 2>/dev/null || pacman -Syu --noconfirm lz4 2>/dev/null || zypper in -y lz4 2>/dev/null
	fi
	if [ ! $(command -v lz4) ]; then
		printf "%s\n" "${RED}ERROR${RESET}, you did not install ${BLUE}lz4${RESET}"
		press_enter_to_return
		install_armbian_linux_distro
	fi
	ARMBIAN_TUNA_REPO='https://mirrors.bfsu.edu.cn/armbian-releases/_rootfs'
	ARMBIAN_ROOTFS_FILE="$(curl -L ${ARMBIAN_TUNA_REPO}/ | grep "${DISTRO_NAME}-${DISTRO_CODE}" | grep -Ev '\.tar\.lz4\.asc|\.torrent|\.lz4\.list|\.current' | grep ${ARCH_TYPE} | grep date | sed -E 's@<a (href)@\n\1@g' | awk -F 'href=' '{print $2}' | cut -d '"' -f 2 | tail -n 1)"
	ARMBIAN_ROOTFS_URL="${ARMBIAN_TUNA_REPO}/${ARMBIAN_ROOTFS_FILE}"
	case "${DISTRO_NAME}" in
	squeeze | wheezy | jessie | stretch | buster) install_armbian_buster_via_tuna ;;
	*) install_armbian_testing_via_tuna ;;
	esac
}
########
install_armbian_buster_via_tuna() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed \
			-e "s@\${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@${ARMBIAN_ROOTFS_URL}@g" \
			-e 's@rootfs.tar.xz@rootfs.tar.lz4@g' \
			-e "s/debian container/${DISTRO_NAME} container/g" \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e 's@#deb http@deb http@g' \
			-e 's/.*sid main/#&/' \
			-e "s@stable/updates@${DISTRO_NAME}/updates@g" \
			-e "s@buster-backports@${DISTRO_NAME}-backports@g" \
			-e "s@debian/ stable@debian/ ${DISTRO_NAME}@g" \
			-e "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
###########
install_armbian_testing_via_tuna() {
	bash -c "$(sed -n p ${TMOE_SHARE_DIR}/container/install |
		sed \
			-e "s@\${TUNA_LXC_IMAGE_MIRROR_REPO}.*rootfs.tar.xz@${ARMBIAN_ROOTFS_URL}@g" \
			-e 's@rootfs.tar.xz@rootfs.tar.lz4@g' \
			-e "s/debian container/${DISTRO_NAME} container/g" \
			-e "s:debian-sid:${DISTRO_NAME}-${DISTRO_CODE}:g" \
			-e 's@#deb http@deb http@g' \
			-e 's/.*sid main/#&/' \
			-e "s@stable/updates@${DISTRO_NAME}-security@g" \
			-e "s@buster-backports@${DISTRO_NAME}-backports@g" \
			-e "s@debian/ stable@debian/ ${DISTRO_NAME}@g" \
			-e "s:Debian GNU/Linux:${DISTRO_NAME} GNU/Linux:g")"
}
###########
custom_armbian_version() {
	TARGET=$(whiptail --inputbox "ËØ∑ËæìÂÖ•armbianÁâàÊú¨‰ª£Âè∑Ôºå‰æãÂ¶Çbullseye(Ëã±ÊñáÂ∞èÂÜô)\nPlease type the armbian version code." 9 50 --title "ARMBIAN CODE" 3>&1 1>&2 2>&3)
	DISTRO_CODE="$(printf '%s\n' "${TARGET}" | head -n 1 | cut -d ' ' -f 1)"
	if [ -z "${DISTRO_CODE}" ]; then
		printf "%s\n" "Ê£ÄÊµãÂà∞ÊÇ®ÂèñÊ∂à‰∫ÜÊìç‰Ωú"
		printf "%s\n" "Â∑≤Ëá™Âä®ÂàáÊç¢‰∏∫armbian bullseye"
		DISTRO_CODE='bullseye'
	fi
	DISTRO_NAME=${DISTRO_CODE}
}
###########
install_mint_linux_distro() {
	case ${ARCH_TYPE} in
	amd64 | i386) which_linux_mint_distro ;;
	*)
		case ${TMOE_LANG} in
		zh_*UTF-8)
			printf "%s\n" "${RED}WARNINGÔºÅ${RESET}Ê£ÄÊµãÂà∞ÊÇ®‰ΩøÁî®ÁöÑÊòØ${ARCH_TYPE}Êû∂ÊûÑ"
			printf "%s\n" "Linux Mint${RED}‰∏çÊîØÊåÅ${RESET}ÊÇ®ÁöÑÊû∂ÊûÑ"
			printf "%s\n" "ËØ∑Â∞ùËØï${PURPLE}Ë∑®Êû∂ÊûÑ${RESET}ËøêË°å${YELLOW}amd64${RESET}Êàñ${YELLOW}i386${RESET}"
			press_enter_to_return
			install_beta_containers
			;;
		*) distro_does_not_support ;;
		esac
		;;
	esac
}
################
check_mint_version_code() {
	DISTRO_NAME='mint'
	OLD_STABLE_VERSION='tricia'
	LXC_IMAGES_REPO="https://mirrors.bfsu.edu.cn/lxc-images/images/${DISTRO_NAME}/"
	DISTRO_CODE=$(curl -sL ${LXC_IMAGES_REPO} | grep date | cut -d '=' -f 4 | cut -d '"' -f 2 | grep -Ev 'size|sarah|serena|sonya|sylvia|tara|tessa|tina|tricia|ulyana' | tail -n 1)
}
###########
which_linux_mint_distro() {
	RETURN_TO_WHERE='which_linux_mint_distro'
	DISTRO_NAME='mint'
	BETA_SYSTEM=$(
		whiptail --title "mint" --menu "ÊÇ®ÊÉ≥Ë¶ÅÂÆâË£ÖÂì™‰∏™MintÁâàÊú¨Ôºü\nWhich version do you want to install?\nIf you are using i386,then choose tricia." 0 0 0 \
			"1" "Auto check Ëá™Âä®Ê£ÄÊµãÁâàÊú¨" \
			"2" "Custom codeÊâãÂä®ËæìÂÖ•ÁâàÊú¨‰ª£Âè∑" \
			"0" "üåö Return to previous menu ËøîÂõû‰∏äÁ∫ßËèúÂçï" \
			3>&1 1>&2 2>&3
	)
	##############################
	case "${BETA_SYSTEM}" in
	0 | "") choose_which_gnu_linux_distro ;;
	1)
		check_mint_version_code
		which_version_do_you_want_to_install
		;;
	2) custom_mint_version ;;
	esac
	######################
	press_enter_to_return
	tmoe_manager_main_menu
}
#########################
custom_mint_version() {
	TARGET=$(whiptail --inputbox "ËØ∑ËæìÂÖ•mintÁâàÊú¨‰ª£Âè∑Ôºå‰æãÂ¶Çulyana(Ëã±ÊñáÂ∞èÂÜô)\n Please enter the mint version code." 12 50 --title "MINT CODE" 3>&1 1>&2 2>&3)
	DISTRO_CODE="$(printf '%s\n' "${TARGET}" | head -n 1 | cut -d ' ' -f 1)"
	if [ -z "${DISTRO_CODE}" ]; then
		printf "%s\n" "Ê£ÄÊµãÂà∞ÊÇ®ÂèñÊ∂à‰∫ÜÊìç‰Ωú"
		printf "%s\n" "Â∑≤Ëá™Âä®ÂàáÊç¢‰∏∫ulyana"
		DISTRO_CODE='ulyana'
	fi
	before_going_to_proot_menu
	printf "%s\n" "Âç≥Â∞Ü‰∏∫ÊÇ®ÂÆâË£ÖMint ${DISTRO_CODE} GNU/Linux container"
	do_you_want_to_continue
	linux_distro_common_model_01
}
######################
